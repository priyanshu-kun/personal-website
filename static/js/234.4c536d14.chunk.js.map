{"version":3,"file":"static/js/234.4c536d14.chunk.js","mappings":"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","sources":["../node_modules/@sanity/client/lib/assets/assetsClient.js","../node_modules/@sanity/client/lib/auth/authClient.js","../node_modules/@sanity/client/lib/config.js","../node_modules/@sanity/client/lib/data/dataMethods.js","../node_modules/@sanity/client/lib/data/encodeQueryString.js","../node_modules/@sanity/client/lib/data/listen.js","../node_modules/@sanity/client/lib/data/patch.js","../node_modules/@sanity/client/lib/data/transaction.js","../node_modules/@sanity/client/lib/datasets/datasetsClient.js","../node_modules/@sanity/client/lib/generateHelpUrl.js","../node_modules/@sanity/client/lib/http/browserMiddleware.js","../node_modules/@sanity/client/lib/http/errors.js","../node_modules/@sanity/client/lib/http/queryString.js","../node_modules/@sanity/client/lib/http/request.js","../node_modules/@sanity/client/lib/http/requestOptions.js","../node_modules/@sanity/client/lib/projects/projectsClient.js","../node_modules/@sanity/client/lib/sanityClient.js","../node_modules/@sanity/client/lib/users/usersClient.js","../node_modules/@sanity/client/lib/util/defaults.js","../node_modules/@sanity/client/lib/util/getSelection.js","../node_modules/@sanity/client/lib/util/observable.js","../node_modules/@sanity/client/lib/util/once.js","../node_modules/@sanity/client/lib/util/pick.js","../node_modules/@sanity/client/lib/validators.js","../node_modules/@sanity/client/lib/warnings.js","../node_modules/@sanity/eventsource/browser.js","../node_modules/@sanity/image-url/src/parseAssetId.ts","../node_modules/@sanity/image-url/src/parseSource.ts","../node_modules/@sanity/image-url/src/urlForImage.ts","../node_modules/@sanity/image-url/src/builder.ts","../node_modules/event-source-polyfill/src/eventsource.js","../node_modules/get-it/index.js","../node_modules/get-it/src/index.js","../node_modules/get-it/src/middleware/defaultOptionsProcessor.js","../node_modules/get-it/src/middleware/defaultOptionsValidator.js","../node_modules/get-it/src/middleware/jsonRequest.js","../node_modules/get-it/src/middleware/jsonResponse.js","../node_modules/get-it/src/middleware/observable.js","../node_modules/get-it/src/middleware/progress/browser-progress.js","../node_modules/get-it/src/middleware/progress/index.js","../node_modules/get-it/src/request/browser-request.js","../node_modules/get-it/src/request/browser/fetchXhr.js","../node_modules/get-it/src/request/index.js","../node_modules/get-it/src/util/global.js","../node_modules/get-it/src/util/middlewareReducer.js","../node_modules/is-plain-object/index.js","../node_modules/isobject/index.js","../node_modules/make-error/index.js","../node_modules/nano-pubsub/index.js","../node_modules/parse-headers/parse-headers.js","../node_modules/querystringify/index.js","../node_modules/requires-port/index.js","../node_modules/rxjs/src/internal/Observable.ts","../node_modules/rxjs/src/internal/Observer.ts","../node_modules/rxjs/src/internal/Subscriber.ts","../node_modules/rxjs/src/internal/Subscription.ts","../node_modules/rxjs/src/internal/config.ts","../node_modules/rxjs/src/internal/operators/filter.ts","../node_modules/rxjs/src/internal/operators/map.ts","../node_modules/rxjs/src/internal/symbol/observable.ts","../node_modules/rxjs/src/internal/symbol/rxSubscriber.ts","../node_modules/rxjs/src/internal/util/UnsubscriptionError.ts","../node_modules/rxjs/src/internal/util/canReportError.ts","../node_modules/rxjs/src/internal/util/hostReportError.ts","../node_modules/rxjs/src/internal/util/identity.ts","../node_modules/rxjs/src/internal/util/isArray.ts","../node_modules/rxjs/src/internal/util/isFunction.ts","../node_modules/rxjs/src/internal/util/isObject.ts","../node_modules/rxjs/src/internal/util/pipe.ts","../node_modules/rxjs/src/internal/util/toSubscriber.ts","../node_modules/same-origin/index.js","../node_modules/same-origin/url-parser.js","../node_modules/url-parse/index.js"],"sourcesContent":["\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    map = _require.map,\n    filter = _require.filter;\n\nvar queryString = require('../http/queryString');\n\nvar validators = require('../validators');\n\nfunction AssetsClient(client) {\n  this.client = client;\n}\n\nfunction optionsFromFile(opts, file) {\n  if (typeof window === 'undefined' || !(file instanceof window.File)) {\n    return opts;\n  }\n\n  return assign({\n    filename: opts.preserveFilename === false ? undefined : file.name,\n    contentType: file.type\n  }, opts);\n}\n\nassign(AssetsClient.prototype, {\n  /**\n   * Upload an asset\n   *\n   * @param  {String} assetType `image` or `file`\n   * @param  {File|Blob|Buffer|ReadableStream} body File to upload\n   * @param  {Object}  opts Options for the upload\n   * @param  {Boolean} opts.preserveFilename Whether or not to preserve the original filename (default: true)\n   * @param  {String}  opts.filename Filename for this file (optional)\n   * @param  {Number}  opts.timeout  Milliseconds to wait before timing the request out (default: 0)\n   * @param  {String}  opts.contentType Mime type of the file\n   * @param  {Array}   opts.extract Array of metadata parts to extract from image.\n   *                                 Possible values: `location`, `exif`, `image`, `palette`\n   * @param  {String}  opts.label Label\n   * @param  {String}  opts.title Title\n   * @param  {String}  opts.description Description\n   * @param  {String}  opts.creditLine The credit to person(s) and/or organization(s) required by the supplier of the image to be used when published\n   * @param  {Object}  opts.source Source data (when the asset is from an external service)\n   * @param  {String}  opts.source.id The (u)id of the asset within the source, i.e. 'i-f323r1E'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.name The name of the source, i.e. 'unsplash'\n   *                                  Required if source is defined\n   * @param  {String}  opts.source.url A url to where to find the asset, or get more info about it in the source\n   *                                  Optional\n   * @return {Promise} Resolves with the created asset document\n   */\n  upload: function upload(assetType, body) {\n    var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    validators.validateAssetType(assetType); // If an empty array is given, explicitly set `none` to override API defaults\n\n    var meta = opts.extract || undefined;\n\n    if (meta && !meta.length) {\n      meta = ['none'];\n    }\n\n    var dataset = validators.hasDataset(this.client.clientConfig);\n    var assetEndpoint = assetType === 'image' ? 'images' : 'files';\n    var options = optionsFromFile(opts, body);\n    var tag = options.tag,\n        label = options.label,\n        title = options.title,\n        description = options.description,\n        creditLine = options.creditLine,\n        filename = options.filename,\n        source = options.source;\n    var query = {\n      label: label,\n      title: title,\n      description: description,\n      filename: filename,\n      meta: meta,\n      creditLine: creditLine\n    };\n\n    if (source) {\n      query.sourceId = source.id;\n      query.sourceName = source.name;\n      query.sourceUrl = source.url;\n    }\n\n    var observable = this.client._requestObservable({\n      tag: tag,\n      method: 'POST',\n      timeout: options.timeout || 0,\n      uri: \"/assets/\".concat(assetEndpoint, \"/\").concat(dataset),\n      headers: options.contentType ? {\n        'Content-Type': options.contentType\n      } : {},\n      query: query,\n      body: body\n    });\n\n    return this.client.isPromiseAPI() ? observable.pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body.document;\n    })).toPromise() : observable;\n  },\n  delete: function _delete(type, id) {\n    // eslint-disable-next-line no-console\n    console.warn('client.assets.delete() is deprecated, please use client.delete(<document-id>)');\n    var docId = id || '';\n\n    if (!/^(image|file)-/.test(docId)) {\n      docId = \"\".concat(type, \"-\").concat(docId);\n    } else if (type._id) {\n      // We could be passing an entire asset document instead of an ID\n      docId = type._id;\n    }\n\n    validators.hasDataset(this.client.clientConfig);\n    return this.client.delete(docId);\n  },\n  getImageUrl: function getImageUrl(ref, query) {\n    var id = ref._ref || ref;\n\n    if (typeof id !== 'string') {\n      throw new Error('getImageUrl() needs either an object with a _ref, or a string with an asset document ID');\n    }\n\n    if (!/^image-[A-Za-z0-9_]+-\\d+x\\d+-[a-z]{1,5}$/.test(id)) {\n      throw new Error(\"Unsupported asset ID \\\"\".concat(id, \"\\\". URL generation only works for auto-generated IDs.\"));\n    }\n\n    var _id$split = id.split('-'),\n        _id$split2 = _slicedToArray(_id$split, 4),\n        assetId = _id$split2[1],\n        size = _id$split2[2],\n        format = _id$split2[3];\n\n    validators.hasDataset(this.client.clientConfig);\n    var _this$client$clientCo = this.client.clientConfig,\n        projectId = _this$client$clientCo.projectId,\n        dataset = _this$client$clientCo.dataset;\n    var qs = query ? queryString(query) : '';\n    return \"https://cdn.sanity.io/images/\".concat(projectId, \"/\").concat(dataset, \"/\").concat(assetId, \"-\").concat(size, \".\").concat(format).concat(qs);\n  }\n});\nmodule.exports = AssetsClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction AuthClient(client) {\n  this.client = client;\n}\n\nassign(AuthClient.prototype, {\n  getLoginProviders: function getLoginProviders() {\n    return this.client.request({\n      uri: '/auth/providers'\n    });\n  },\n  logout: function logout() {\n    return this.client.request({\n      uri: '/auth/logout',\n      method: 'POST'\n    });\n  }\n});\nmodule.exports = AuthClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar generateHelpUrl = require('./generateHelpUrl');\n\nvar validate = require('./validators');\n\nvar warnings = require('./warnings');\n\nvar defaultCdnHost = 'apicdn.sanity.io';\nvar defaultConfig = {\n  apiHost: 'https://api.sanity.io',\n  apiVersion: '1',\n  useProjectHostname: true,\n  isPromiseAPI: true\n};\nvar LOCALHOSTS = ['localhost', '127.0.0.1', '0.0.0.0'];\n\nvar isLocal = function isLocal(host) {\n  return LOCALHOSTS.indexOf(host) !== -1;\n};\n\nexports.defaultConfig = defaultConfig; // eslint-disable-next-line complexity\n\nexports.initConfig = function (config, prevConfig) {\n  var specifiedConfig = assign({}, prevConfig, config);\n\n  if (!specifiedConfig.apiVersion) {\n    warnings.printNoApiVersionSpecifiedWarning();\n  }\n\n  var newConfig = assign({}, defaultConfig, specifiedConfig);\n  var projectBased = newConfig.useProjectHostname;\n\n  if (typeof Promise === 'undefined') {\n    var helpUrl = generateHelpUrl('js-client-promise-polyfill');\n    throw new Error(\"No native Promise-implementation found, polyfill needed - see \".concat(helpUrl));\n  }\n\n  if (projectBased && !newConfig.projectId) {\n    throw new Error('Configuration must contain `projectId`');\n  }\n\n  var isBrowser = typeof window !== 'undefined' && window.location && window.location.hostname;\n  var isLocalhost = isBrowser && isLocal(window.location.hostname);\n\n  if (isBrowser && isLocalhost && newConfig.token && newConfig.ignoreBrowserTokenWarning !== true) {\n    warnings.printBrowserTokenWarning();\n  } else if (typeof newConfig.useCdn === 'undefined') {\n    warnings.printCdnWarning();\n  }\n\n  if (projectBased) {\n    validate.projectId(newConfig.projectId);\n  }\n\n  if (newConfig.dataset) {\n    validate.dataset(newConfig.dataset);\n  }\n\n  if ('requestTagPrefix' in newConfig) {\n    // Allow setting and unsetting request tag prefix\n    newConfig.requestTagPrefix = newConfig.requestTagPrefix ? validate.requestTag(newConfig.requestTagPrefix).replace(/\\.+$/, '') : undefined;\n  }\n\n  newConfig.apiVersion = \"\".concat(newConfig.apiVersion).replace(/^v/, '');\n  newConfig.isDefaultApi = newConfig.apiHost === defaultConfig.apiHost;\n  newConfig.useCdn = Boolean(newConfig.useCdn) && !newConfig.withCredentials;\n  exports.validateApiVersion(newConfig.apiVersion);\n  var hostParts = newConfig.apiHost.split('://', 2);\n  var protocol = hostParts[0];\n  var host = hostParts[1];\n  var cdnHost = newConfig.isDefaultApi ? defaultCdnHost : host;\n\n  if (newConfig.useProjectHostname) {\n    newConfig.url = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(host, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = \"\".concat(protocol, \"://\").concat(newConfig.projectId, \".\").concat(cdnHost, \"/v\").concat(newConfig.apiVersion);\n  } else {\n    newConfig.url = \"\".concat(newConfig.apiHost, \"/v\").concat(newConfig.apiVersion);\n    newConfig.cdnUrl = newConfig.url;\n  }\n\n  return newConfig;\n};\n\nexports.validateApiVersion = function validateApiVersion(apiVersion) {\n  if (apiVersion === '1' || apiVersion === 'X') {\n    return;\n  }\n\n  var apiDate = new Date(apiVersion);\n  var apiVersionValid = /^\\d{4}-\\d{2}-\\d{2}$/.test(apiVersion) && apiDate instanceof Date && apiDate.getTime() > 0;\n\n  if (!apiVersionValid) {\n    throw new Error('Invalid API version string, expected `1` or date in format `YYYY-MM-DD`');\n  }\n};","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    map = _require.map,\n    filter = _require.filter;\n\nvar validators = require('../validators');\n\nvar getSelection = require('../util/getSelection');\n\nvar encodeQueryString = require('./encodeQueryString');\n\nvar Transaction = require('./transaction');\n\nvar Patch = require('./patch');\n\nvar listen = require('./listen');\n\nvar excludeFalsey = function excludeFalsey(param, defValue) {\n  var value = typeof param === 'undefined' ? defValue : param;\n  return param === false ? undefined : value;\n};\n\nvar getMutationQuery = function getMutationQuery() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return {\n    dryRun: options.dryRun,\n    returnIds: true,\n    returnDocuments: excludeFalsey(options.returnDocuments, true),\n    visibility: options.visibility || 'sync',\n    autoGenerateArrayKeys: options.autoGenerateArrayKeys,\n    skipCrossDatasetReferenceValidation: options.skipCrossDatasetReferenceValidation\n  };\n};\n\nvar isResponse = function isResponse(event) {\n  return event.type === 'response';\n};\n\nvar getBody = function getBody(event) {\n  return event.body;\n};\n\nvar indexBy = function indexBy(docs, attr) {\n  return docs.reduce(function (indexed, doc) {\n    indexed[attr(doc)] = doc;\n    return indexed;\n  }, Object.create(null));\n};\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nvar getQuerySizeLimit = 11264;\nmodule.exports = {\n  listen: listen,\n  getDataUrl: function getDataUrl(operation, path) {\n    var config = this.clientConfig;\n    var catalog = validators.hasDataset(config);\n    var baseUri = \"/\".concat(operation, \"/\").concat(catalog);\n    var uri = path ? \"\".concat(baseUri, \"/\").concat(path) : baseUri;\n    return \"/data\".concat(uri).replace(/\\/($|\\?)/, '$1');\n  },\n  fetch: function fetch(query, params) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var mapResponse = options.filterResponse === false ? function (res) {\n      return res;\n    } : function (res) {\n      return res.result;\n    };\n\n    var observable = this._dataRequest('query', {\n      query: query,\n      params: params\n    }, options).pipe(map(mapResponse));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocument: function getDocument(id) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', id),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      return event.body.documents && event.body.documents[0];\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  getDocuments: function getDocuments(ids) {\n    var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var options = {\n      uri: this.getDataUrl('doc', ids.join(',')),\n      json: true,\n      tag: opts.tag\n    };\n\n    var observable = this._requestObservable(options).pipe(filter(isResponse), map(function (event) {\n      var indexed = indexBy(event.body.documents || [], function (doc) {\n        return doc._id;\n      });\n      return ids.map(function (id) {\n        return indexed[id] || null;\n      });\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  },\n  create: function create(doc, options) {\n    return this._create(doc, 'create', options);\n  },\n  createIfNotExists: function createIfNotExists(doc, options) {\n    validators.requireDocumentId('createIfNotExists', doc);\n    return this._create(doc, 'createIfNotExists', options);\n  },\n  createOrReplace: function createOrReplace(doc, options) {\n    validators.requireDocumentId('createOrReplace', doc);\n    return this._create(doc, 'createOrReplace', options);\n  },\n  patch: function patch(selector, operations) {\n    return new Patch(selector, operations, this);\n  },\n  delete: function _delete(selection, options) {\n    return this.dataRequest('mutate', {\n      mutations: [{\n        delete: getSelection(selection)\n      }]\n    }, options);\n  },\n  mutate: function mutate(mutations, options) {\n    var mut = mutations instanceof Patch || mutations instanceof Transaction ? mutations.serialize() : mutations;\n    var muts = Array.isArray(mut) ? mut : [mut];\n    var transactionId = options && options.transactionId;\n    return this.dataRequest('mutate', {\n      mutations: muts,\n      transactionId: transactionId\n    }, options);\n  },\n  transaction: function transaction(operations) {\n    return new Transaction(operations, this);\n  },\n  dataRequest: function dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var request = this._dataRequest(endpoint, body, options);\n\n    return this.isPromiseAPI() ? toPromise(request) : request;\n  },\n  _dataRequest: function _dataRequest(endpoint, body) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var isMutation = endpoint === 'mutate';\n    var isQuery = endpoint === 'query'; // Check if the query string is within a configured threshold,\n    // in which case we can use GET. Otherwise, use POST.\n\n    var strQuery = !isMutation && encodeQueryString(body);\n    var useGet = !isMutation && strQuery.length < getQuerySizeLimit;\n    var stringQuery = useGet ? strQuery : '';\n    var returnFirst = options.returnFirst;\n    var timeout = options.timeout,\n        token = options.token,\n        tag = options.tag,\n        headers = options.headers;\n    var uri = this.getDataUrl(endpoint, stringQuery);\n    var reqOptions = {\n      method: useGet ? 'GET' : 'POST',\n      uri: uri,\n      json: true,\n      body: useGet ? undefined : body,\n      query: isMutation && getMutationQuery(options),\n      timeout: timeout,\n      headers: headers,\n      token: token,\n      tag: tag,\n      canUseCdn: isQuery\n    };\n    return this._requestObservable(reqOptions).pipe(filter(isResponse), map(getBody), map(function (res) {\n      if (!isMutation) {\n        return res;\n      } // Should we return documents?\n\n\n      var results = res.results || [];\n\n      if (options.returnDocuments) {\n        return returnFirst ? results[0] && results[0].document : results.map(function (mut) {\n          return mut.document;\n        });\n      } // Return a reduced subset\n\n\n      var key = returnFirst ? 'documentId' : 'documentIds';\n      var ids = returnFirst ? results[0] && results[0].id : results.map(function (mut) {\n        return mut.id;\n      });\n      return _defineProperty({\n        transactionId: res.transactionId,\n        results: results\n      }, key, ids);\n    }));\n  },\n  _create: function _create(doc, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    var mutation = _defineProperty({}, op, doc);\n\n    var opts = assign({\n      returnFirst: true,\n      returnDocuments: true\n    }, options);\n    return this.dataRequest('mutate', {\n      mutations: [mutation]\n    }, opts);\n  }\n};","\"use strict\";\n\nvar _excluded = [\"tag\"];\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nvar enc = encodeURIComponent;\n\nmodule.exports = function (_ref) {\n  var query = _ref.query,\n      _ref$params = _ref.params,\n      params = _ref$params === void 0 ? {} : _ref$params,\n      _ref$options = _ref.options,\n      options = _ref$options === void 0 ? {} : _ref$options;\n\n  // We generally want tag at the start of the query string\n  var tag = options.tag,\n      opts = _objectWithoutProperties(options, _excluded);\n\n  var q = \"query=\".concat(enc(query));\n  var base = tag ? \"?tag=\".concat(enc(tag), \"&\").concat(q) : \"?\".concat(q);\n  var qString = Object.keys(params).reduce(function (qs, param) {\n    return \"\".concat(qs, \"&\").concat(enc(\"$\".concat(param)), \"=\").concat(enc(JSON.stringify(params[param])));\n  }, base);\n  return Object.keys(opts).reduce(function (qs, option) {\n    // Only include the option if it is truthy\n    return options[option] ? \"\".concat(qs, \"&\").concat(enc(option), \"=\").concat(enc(options[option])) : qs;\n  }, qString);\n};","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('../util/observable'),\n    Observable = _require.Observable;\n\nvar polyfilledEventSource = require('@sanity/eventsource');\n\nvar pick = require('../util/pick');\n\nvar defaults = require('../util/defaults');\n\nvar encodeQueryString = require('./encodeQueryString'); // Limit is 16K for a _request_, eg including headers. Have to account for an\n// unknown range of headers, but an average EventSource request from Chrome seems\n// to have around 700 bytes of cruft, so let us account for 1.2K to be \"safe\"\n\n\nvar MAX_URL_LENGTH = 16000 - 1200;\nvar EventSource = polyfilledEventSource;\nvar possibleOptions = ['includePreviousRevision', 'includeResult', 'visibility', 'effectFormat', 'tag'];\nvar defaultOptions = {\n  includeResult: true\n};\n\nmodule.exports = function listen(query, params) {\n  var opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var _this$clientConfig = this.clientConfig,\n      url = _this$clientConfig.url,\n      token = _this$clientConfig.token,\n      withCredentials = _this$clientConfig.withCredentials,\n      requestTagPrefix = _this$clientConfig.requestTagPrefix;\n  var tag = opts.tag && requestTagPrefix ? [requestTagPrefix, opts.tag].join('.') : opts.tag;\n\n  var options = _objectSpread(_objectSpread({}, defaults(opts, defaultOptions)), {}, {\n    tag: tag\n  });\n\n  var listenOpts = pick(options, possibleOptions);\n  var qs = encodeQueryString({\n    query: query,\n    params: params,\n    options: listenOpts,\n    tag: tag\n  });\n  var uri = \"\".concat(url).concat(this.getDataUrl('listen', qs));\n\n  if (uri.length > MAX_URL_LENGTH) {\n    return new Observable(function (observer) {\n      return observer.error(new Error('Query too large for listener'));\n    });\n  }\n\n  var listenFor = options.events ? options.events : ['mutation'];\n  var shouldEmitReconnect = listenFor.indexOf('reconnect') !== -1;\n  var esOptions = {};\n\n  if (token || withCredentials) {\n    esOptions.withCredentials = true;\n  }\n\n  if (token) {\n    esOptions.headers = {\n      Authorization: \"Bearer \".concat(token)\n    };\n  }\n\n  return new Observable(function (observer) {\n    var es = getEventSource();\n    var reconnectTimer;\n    var stopped = false;\n\n    function onError() {\n      if (stopped) {\n        return;\n      }\n\n      emitReconnect(); // Allow event handlers of `emitReconnect` to cancel/close the reconnect attempt\n\n      if (stopped) {\n        return;\n      } // Unless we've explicitly stopped the ES (in which case `stopped` should be true),\n      // we should never be in a disconnected state. By default, EventSource will reconnect\n      // automatically, in which case it sets readyState to `CONNECTING`, but in some cases\n      // (like when a laptop lid is closed), it closes the connection. In these cases we need\n      // to explicitly reconnect.\n\n\n      if (es.readyState === EventSource.CLOSED) {\n        unsubscribe();\n        clearTimeout(reconnectTimer);\n        reconnectTimer = setTimeout(open, 100);\n      }\n    }\n\n    function onChannelError(err) {\n      observer.error(cooerceError(err));\n    }\n\n    function onMessage(evt) {\n      var event = parseEvent(evt);\n      return event instanceof Error ? observer.error(event) : observer.next(event);\n    }\n\n    function onDisconnect(evt) {\n      stopped = true;\n      unsubscribe();\n      observer.complete();\n    }\n\n    function unsubscribe() {\n      es.removeEventListener('error', onError, false);\n      es.removeEventListener('channelError', onChannelError, false);\n      es.removeEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return es.removeEventListener(type, onMessage, false);\n      });\n      es.close();\n    }\n\n    function emitReconnect() {\n      if (shouldEmitReconnect) {\n        observer.next({\n          type: 'reconnect'\n        });\n      }\n    }\n\n    function getEventSource() {\n      var evs = new EventSource(uri, esOptions);\n      evs.addEventListener('error', onError, false);\n      evs.addEventListener('channelError', onChannelError, false);\n      evs.addEventListener('disconnect', onDisconnect, false);\n      listenFor.forEach(function (type) {\n        return evs.addEventListener(type, onMessage, false);\n      });\n      return evs;\n    }\n\n    function open() {\n      es = getEventSource();\n    }\n\n    function stop() {\n      stopped = true;\n      unsubscribe();\n    }\n\n    return stop;\n  });\n};\n\nfunction parseEvent(event) {\n  try {\n    var data = event.data && JSON.parse(event.data) || {};\n    return assign({\n      type: event.type\n    }, data);\n  } catch (err) {\n    return err;\n  }\n}\n\nfunction cooerceError(err) {\n  if (err instanceof Error) {\n    return err;\n  }\n\n  var evt = parseEvent(err);\n  return evt instanceof Error ? evt : new Error(extractErrorMessage(evt));\n}\n\nfunction extractErrorMessage(err) {\n  if (!err.error) {\n    return err.message || 'Unknown listener error';\n  }\n\n  if (err.error.description) {\n    return err.error.description;\n  }\n\n  return typeof err.error === 'string' ? err.error : JSON.stringify(err.error, null, 2);\n}","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar getSelection = require('../util/getSelection');\n\nvar validate = require('../validators');\n\nvar validateObject = validate.validateObject;\nvar validateInsert = validate.validateInsert;\n\nfunction Patch(selection) {\n  var operations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var client = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  this.selection = selection;\n  this.operations = assign({}, operations);\n  this.client = client;\n}\n\nassign(Patch.prototype, {\n  clone: function clone() {\n    return new Patch(this.selection, assign({}, this.operations), this.client);\n  },\n  set: function set(props) {\n    return this._assign('set', props);\n  },\n  diffMatchPatch: function diffMatchPatch(props) {\n    validateObject('diffMatchPatch', props);\n    return this._assign('diffMatchPatch', props);\n  },\n  unset: function unset(attrs) {\n    if (!Array.isArray(attrs)) {\n      throw new Error('unset(attrs) takes an array of attributes to unset, non-array given');\n    }\n\n    this.operations = assign({}, this.operations, {\n      unset: attrs\n    });\n    return this;\n  },\n  setIfMissing: function setIfMissing(props) {\n    return this._assign('setIfMissing', props);\n  },\n  replace: function replace(props) {\n    validateObject('replace', props);\n    return this._set('set', {\n      $: props\n    }); // eslint-disable-line id-length\n  },\n  inc: function inc(props) {\n    return this._assign('inc', props);\n  },\n  dec: function dec(props) {\n    return this._assign('dec', props);\n  },\n  insert: function insert(at, selector, items) {\n    var _this$_assign;\n\n    validateInsert(at, selector, items);\n    return this._assign('insert', (_this$_assign = {}, _defineProperty(_this$_assign, at, selector), _defineProperty(_this$_assign, \"items\", items), _this$_assign));\n  },\n  append: function append(selector, items) {\n    return this.insert('after', \"\".concat(selector, \"[-1]\"), items);\n  },\n  prepend: function prepend(selector, items) {\n    return this.insert('before', \"\".concat(selector, \"[0]\"), items);\n  },\n  splice: function splice(selector, start, deleteCount, items) {\n    // Negative indexes doesn't mean the same in Sanity as they do in JS;\n    // -1 means \"actually at the end of the array\", which allows inserting\n    // at the end of the array without knowing its length. We therefore have\n    // to substract negative indexes by one to match JS. If you want Sanity-\n    // behaviour, just use `insert('replace', selector, items)` directly\n    var delAll = typeof deleteCount === 'undefined' || deleteCount === -1;\n    var startIndex = start < 0 ? start - 1 : start;\n    var delCount = delAll ? -1 : Math.max(0, start + deleteCount);\n    var delRange = startIndex < 0 && delCount >= 0 ? '' : delCount;\n    var rangeSelector = \"\".concat(selector, \"[\").concat(startIndex, \":\").concat(delRange, \"]\");\n    return this.insert('replace', rangeSelector, items || []);\n  },\n  ifRevisionId: function ifRevisionId(rev) {\n    this.operations.ifRevisionID = rev;\n    return this;\n  },\n  serialize: function serialize() {\n    return assign(getSelection(this.selection), this.operations);\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    if (!this.client) {\n      throw new Error('No `client` passed to patch, either provide one or pass the ' + 'patch to a clients `mutate()` method');\n    }\n\n    var returnFirst = typeof this.selection === 'string';\n    var opts = assign({\n      returnFirst: returnFirst,\n      returnDocuments: true\n    }, options);\n    return this.client.mutate({\n      patch: this.serialize()\n    }, opts);\n  },\n  reset: function reset() {\n    this.operations = {};\n    return this;\n  },\n  _set: function _set(op, props) {\n    return this._assign(op, props, false);\n  },\n  _assign: function _assign(op, props) {\n    var merge = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    validateObject(op, props);\n    this.operations = assign({}, this.operations, _defineProperty({}, op, assign({}, merge && this.operations[op] || {}, props)));\n    return this;\n  }\n});\nmodule.exports = Patch;","\"use strict\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar validators = require('../validators');\n\nvar Patch = require('./patch');\n\nvar defaultMutateOptions = {\n  returnDocuments: false\n};\n\nfunction Transaction() {\n  var operations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var client = arguments.length > 1 ? arguments[1] : undefined;\n  var transactionId = arguments.length > 2 ? arguments[2] : undefined;\n  this.trxId = transactionId;\n  this.operations = operations;\n  this.client = client;\n}\n\nassign(Transaction.prototype, {\n  clone: function clone() {\n    return new Transaction(this.operations.slice(0), this.client, this.trxId);\n  },\n  create: function create(doc) {\n    validators.validateObject('create', doc);\n    return this._add({\n      create: doc\n    });\n  },\n  createIfNotExists: function createIfNotExists(doc) {\n    var op = 'createIfNotExists';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  createOrReplace: function createOrReplace(doc) {\n    var op = 'createOrReplace';\n    validators.validateObject(op, doc);\n    validators.requireDocumentId(op, doc);\n    return this._add(_defineProperty({}, op, doc));\n  },\n  delete: function _delete(documentId) {\n    validators.validateDocumentId('delete', documentId);\n    return this._add({\n      delete: {\n        id: documentId\n      }\n    });\n  },\n  patch: function patch(documentId, patchOps) {\n    var isBuilder = typeof patchOps === 'function';\n    var isPatch = documentId instanceof Patch; // transaction.patch(client.patch('documentId').inc({visits: 1}))\n\n    if (isPatch) {\n      return this._add({\n        patch: documentId.serialize()\n      });\n    } // patch => patch.inc({visits: 1}).set({foo: 'bar'})\n\n\n    if (isBuilder) {\n      var patch = patchOps(new Patch(documentId, {}, this.client));\n\n      if (!(patch instanceof Patch)) {\n        throw new Error('function passed to `patch()` must return the patch');\n      }\n\n      return this._add({\n        patch: patch.serialize()\n      });\n    }\n\n    return this._add({\n      patch: assign({\n        id: documentId\n      }, patchOps)\n    });\n  },\n  transactionId: function transactionId(id) {\n    if (!id) {\n      return this.trxId;\n    }\n\n    this.trxId = id;\n    return this;\n  },\n  serialize: function serialize() {\n    return this.operations.slice();\n  },\n  toJSON: function toJSON() {\n    return this.serialize();\n  },\n  commit: function commit(options) {\n    if (!this.client) {\n      throw new Error('No `client` passed to transaction, either provide one or pass the ' + 'transaction to a clients `mutate()` method');\n    }\n\n    return this.client.mutate(this.serialize(), assign({\n      transactionId: this.trxId\n    }, defaultMutateOptions, options || {}));\n  },\n  reset: function reset() {\n    this.operations = [];\n    return this;\n  },\n  _add: function _add(mut) {\n    this.operations.push(mut);\n    return this;\n  }\n});\nmodule.exports = Transaction;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar validate = require('../validators');\n\nfunction DatasetsClient(client) {\n  this.request = client.request.bind(client);\n}\n\nassign(DatasetsClient.prototype, {\n  create: function create(name, options) {\n    return this._modify('PUT', name, options);\n  },\n  edit: function edit(name, options) {\n    return this._modify('PATCH', name, options);\n  },\n  delete: function _delete(name) {\n    return this._modify('DELETE', name);\n  },\n  list: function list() {\n    return this.request({\n      uri: '/datasets'\n    });\n  },\n  _modify: function _modify(method, name, body) {\n    validate.dataset(name);\n    return this.request({\n      method: method,\n      uri: \"/datasets/\".concat(name),\n      body: body\n    });\n  }\n});\nmodule.exports = DatasetsClient;","\"use strict\";\n\nvar BASE_URL = 'https://docs.sanity.io/help/';\n\nmodule.exports = function generateHelpUrl(slug) {\n  return BASE_URL + slug;\n};","\"use strict\";\n\nmodule.exports = [];","\"use strict\";\n\nvar makeError = require('make-error');\n\nvar assign = require('object-assign');\n\nfunction ClientError(res) {\n  var props = extractErrorProps(res);\n  ClientError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction ServerError(res) {\n  var props = extractErrorProps(res);\n  ServerError.super.call(this, props.message);\n  assign(this, props);\n}\n\nfunction extractErrorProps(res) {\n  var body = res.body;\n  var props = {\n    response: res,\n    statusCode: res.statusCode,\n    responseBody: stringifyBody(body, res)\n  }; // API/Boom style errors ({statusCode, error, message})\n\n  if (body.error && body.message) {\n    props.message = \"\".concat(body.error, \" - \").concat(body.message);\n    return props;\n  } // Query/database errors ({error: {description, other, arb, props}})\n\n\n  if (body.error && body.error.description) {\n    props.message = body.error.description;\n    props.details = body.error;\n    return props;\n  } // Other, more arbitrary errors\n\n\n  props.message = body.error || body.message || httpErrorMessage(res);\n  return props;\n}\n\nfunction httpErrorMessage(res) {\n  var statusMessage = res.statusMessage ? \" \".concat(res.statusMessage) : '';\n  return \"\".concat(res.method, \"-request to \").concat(res.url, \" resulted in HTTP \").concat(res.statusCode).concat(statusMessage);\n}\n\nfunction stringifyBody(body, res) {\n  var contentType = (res.headers['content-type'] || '').toLowerCase();\n  var isJson = contentType.indexOf('application/json') !== -1;\n  return isJson ? JSON.stringify(body, null, 2) : body;\n}\n\nmakeError(ClientError);\nmakeError(ServerError);\nexports.ClientError = ClientError;\nexports.ServerError = ServerError;","\"use strict\";\n\nmodule.exports = function (params) {\n  var qs = [];\n\n  for (var key in params) {\n    if (params.hasOwnProperty(key)) {\n      qs.push(\"\".concat(encodeURIComponent(key), \"=\").concat(encodeURIComponent(params[key])));\n    }\n  }\n\n  return qs.length > 0 ? \"?\".concat(qs.join('&')) : '';\n};","\"use strict\";\n\n/* eslint-disable no-empty-function, no-process-env */\nvar getIt = require('get-it');\n\nvar assign = require('object-assign');\n\nvar observable = require('get-it/lib/middleware/observable');\n\nvar jsonRequest = require('get-it/lib/middleware/jsonRequest');\n\nvar jsonResponse = require('get-it/lib/middleware/jsonResponse');\n\nvar progress = require('get-it/lib/middleware/progress');\n\nvar _require = require('../util/observable'),\n    Observable = _require.Observable;\n\nvar _require2 = require('./errors'),\n    ClientError = _require2.ClientError,\n    ServerError = _require2.ServerError;\n\nvar httpError = {\n  onResponse: function onResponse(res) {\n    if (res.statusCode >= 500) {\n      throw new ServerError(res);\n    } else if (res.statusCode >= 400) {\n      throw new ClientError(res);\n    }\n\n    return res;\n  }\n};\nvar printWarnings = {\n  onResponse: function onResponse(res) {\n    var warn = res.headers['x-sanity-warning'];\n    var warnings = Array.isArray(warn) ? warn : [warn];\n    warnings.filter(Boolean).forEach(function (msg) {\n      return console.warn(msg);\n    }); // eslint-disable-line no-console\n\n    return res;\n  }\n}; // Environment-specific middleware.\n\nvar envSpecific = require('./nodeMiddleware');\n\nvar middleware = envSpecific.concat([printWarnings, jsonRequest(), jsonResponse(), progress(), httpError, observable({\n  implementation: Observable\n})]);\nvar request = getIt(middleware);\n\nfunction httpRequest(options) {\n  var requester = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : request;\n  return requester(assign({\n    maxRedirects: 0\n  }, options));\n}\n\nhttpRequest.defaultRequester = request;\nhttpRequest.ClientError = ClientError;\nhttpRequest.ServerError = ServerError;\nmodule.exports = httpRequest;","\"use strict\";\n\nvar assign = require('object-assign');\n\nvar projectHeader = 'X-Sanity-Project-ID';\n\nmodule.exports = function (config) {\n  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var headers = {};\n  var token = overrides.token || config.token;\n\n  if (token) {\n    headers.Authorization = \"Bearer \".concat(token);\n  }\n\n  if (!overrides.useGlobalApi && !config.useProjectHostname && config.projectId) {\n    headers[projectHeader] = config.projectId;\n  }\n\n  var withCredentials = Boolean(typeof overrides.withCredentials === 'undefined' ? config.token || config.withCredentials : overrides.withCredentials);\n  var timeout = typeof overrides.timeout === 'undefined' ? config.timeout : overrides.timeout;\n  return assign({}, overrides, {\n    headers: assign({}, headers, overrides.headers || {}),\n    timeout: typeof timeout === 'undefined' ? 5 * 60 * 1000 : timeout,\n    proxy: overrides.proxy || config.proxy,\n    json: true,\n    withCredentials: withCredentials\n  });\n};","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction ProjectsClient(client) {\n  this.client = client;\n}\n\nassign(ProjectsClient.prototype, {\n  list: function list() {\n    return this.client.request({\n      uri: '/projects'\n    });\n  },\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/projects/\".concat(id)\n    });\n  }\n});\nmodule.exports = ProjectsClient;","\"use strict\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar assign = require('object-assign');\n\nvar _require = require('./util/observable'),\n    Observable = _require.Observable,\n    map = _require.map,\n    filter = _require.filter;\n\nvar Patch = require('./data/patch');\n\nvar Transaction = require('./data/transaction');\n\nvar dataMethods = require('./data/dataMethods');\n\nvar DatasetsClient = require('./datasets/datasetsClient');\n\nvar ProjectsClient = require('./projects/projectsClient');\n\nvar AssetsClient = require('./assets/assetsClient');\n\nvar UsersClient = require('./users/usersClient');\n\nvar AuthClient = require('./auth/authClient');\n\nvar httpRequest = require('./http/request');\n\nvar getRequestOptions = require('./http/requestOptions');\n\nvar _require2 = require('./config'),\n    defaultConfig = _require2.defaultConfig,\n    initConfig = _require2.initConfig;\n\nvar validate = require('./validators');\n\nvar toPromise = function toPromise(observable) {\n  return observable.toPromise();\n};\n\nfunction SanityClient() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultConfig;\n\n  if (!(this instanceof SanityClient)) {\n    return new SanityClient(config);\n  }\n\n  this.config(config);\n  this.assets = new AssetsClient(this);\n  this.datasets = new DatasetsClient(this);\n  this.projects = new ProjectsClient(this);\n  this.users = new UsersClient(this);\n  this.auth = new AuthClient(this);\n\n  if (this.clientConfig.isPromiseAPI) {\n    var observableConfig = assign({}, this.clientConfig, {\n      isPromiseAPI: false\n    });\n    this.observable = new SanityClient(observableConfig);\n  }\n}\n\nassign(SanityClient.prototype, dataMethods);\nassign(SanityClient.prototype, {\n  clone: function clone() {\n    return new SanityClient(this.config());\n  },\n  config: function config(newConfig) {\n    if (typeof newConfig === 'undefined') {\n      return assign({}, this.clientConfig);\n    }\n\n    if (this.clientConfig && this.clientConfig.allowReconfigure === false) {\n      throw new Error('Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client');\n    }\n\n    if (this.observable) {\n      var observableConfig = assign({}, newConfig, {\n        isPromiseAPI: false\n      });\n      this.observable.config(observableConfig);\n    }\n\n    this.clientConfig = initConfig(newConfig, this.clientConfig || {});\n    return this;\n  },\n  withConfig: function withConfig(newConfig) {\n    return new SanityClient(_objectSpread(_objectSpread({}, this.config()), newConfig));\n  },\n  getUrl: function getUrl(uri) {\n    var useCdn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var base = useCdn ? this.clientConfig.cdnUrl : this.clientConfig.url;\n    return \"\".concat(base, \"/\").concat(uri.replace(/^\\//, ''));\n  },\n  isPromiseAPI: function isPromiseAPI() {\n    return this.clientConfig.isPromiseAPI;\n  },\n  _requestObservable: function _requestObservable(options) {\n    var _this = this;\n\n    var uri = options.url || options.uri; // If the `canUseCdn`-option is not set we detect it automatically based on the method + URL.\n    // Only the /data endpoint is currently available through API-CDN.\n\n    var canUseCdn = typeof options.canUseCdn === 'undefined' ? ['GET', 'HEAD'].indexOf(options.method || 'GET') >= 0 && uri.indexOf('/data/') === 0 : options.canUseCdn;\n    var useCdn = this.clientConfig.useCdn && canUseCdn;\n    var tag = options.tag && this.clientConfig.requestTagPrefix ? [this.clientConfig.requestTagPrefix, options.tag].join('.') : options.tag || this.clientConfig.requestTagPrefix;\n\n    if (tag) {\n      options.query = _objectSpread({\n        tag: validate.requestTag(tag)\n      }, options.query);\n    }\n\n    var reqOptions = getRequestOptions(this.clientConfig, assign({}, options, {\n      url: this.getUrl(uri, useCdn)\n    }));\n    return new Observable(function (subscriber) {\n      return httpRequest(reqOptions, _this.clientConfig.requester).subscribe(subscriber);\n    });\n  },\n  request: function request(options) {\n    var observable = this._requestObservable(options).pipe(filter(function (event) {\n      return event.type === 'response';\n    }), map(function (event) {\n      return event.body;\n    }));\n\n    return this.isPromiseAPI() ? toPromise(observable) : observable;\n  }\n});\nSanityClient.Patch = Patch;\nSanityClient.Transaction = Transaction;\nSanityClient.ClientError = httpRequest.ClientError;\nSanityClient.ServerError = httpRequest.ServerError;\nSanityClient.requester = httpRequest.defaultRequester;\nmodule.exports = SanityClient;","\"use strict\";\n\nvar assign = require('object-assign');\n\nfunction UsersClient(client) {\n  this.client = client;\n}\n\nassign(UsersClient.prototype, {\n  getById: function getById(id) {\n    return this.client.request({\n      uri: \"/users/\".concat(id)\n    });\n  }\n});\nmodule.exports = UsersClient;","\"use strict\";\n\nmodule.exports = function (obj, defaults) {\n  return Object.keys(defaults).concat(Object.keys(obj)).reduce(function (target, prop) {\n    target[prop] = typeof obj[prop] === 'undefined' ? defaults[prop] : obj[prop];\n    return target;\n  }, {});\n};","\"use strict\";\n\nmodule.exports = function getSelection(sel) {\n  if (typeof sel === 'string' || Array.isArray(sel)) {\n    return {\n      id: sel\n    };\n  }\n\n  if (sel && sel.query) {\n    return 'params' in sel ? {\n      query: sel.query,\n      params: sel.params\n    } : {\n      query: sel.query\n    };\n  }\n\n  var selectionOpts = ['* Document ID (<docId>)', '* Array of document IDs', '* Object containing `query`'].join('\\n');\n  throw new Error(\"Unknown selection - must be one of:\\n\\n\".concat(selectionOpts));\n};","\"use strict\";\n\n//  Since `@sanity/client` doesn't offer ESM exports (yet) const {filter} = require('rxjs/operators') will cause the the whole of rxjs to be included in the bundle.\n//  The internal import paths here is a stop-gap measure and will become less of a problem when @sanity/client export tree-shakeable esm bundles\nvar _require = require('rxjs/internal/Observable'),\n    Observable = _require.Observable;\n\nvar _require2 = require('rxjs/internal/operators/filter'),\n    filter = _require2.filter;\n\nvar _require3 = require('rxjs/internal/operators/map'),\n    map = _require3.map;\n\nmodule.exports = {\n  Observable: Observable,\n  filter: filter,\n  map: map\n};","\"use strict\";\n\nmodule.exports = function (fn) {\n  var didCall = false;\n  var returnValue;\n  return function () {\n    if (didCall) {\n      return returnValue;\n    }\n\n    returnValue = fn.apply(void 0, arguments);\n    didCall = true;\n    return returnValue;\n  };\n};","\"use strict\";\n\nmodule.exports = function (obj, props) {\n  return props.reduce(function (selection, prop) {\n    if (typeof obj[prop] === 'undefined') {\n      return selection;\n    }\n\n    selection[prop] = obj[prop];\n    return selection;\n  }, {});\n};","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nvar VALID_ASSET_TYPES = ['image', 'file'];\nvar VALID_INSERT_LOCATIONS = ['before', 'after', 'replace'];\n\nexports.dataset = function (name) {\n  if (!/^(~[a-z0-9]{1}[-\\w]{0,63}|[a-z0-9]{1}[-\\w]{0,63})$/.test(name)) {\n    throw new Error('Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters');\n  }\n};\n\nexports.projectId = function (id) {\n  if (!/^[-a-z0-9]+$/i.test(id)) {\n    throw new Error('`projectId` can only contain only a-z, 0-9 and dashes');\n  }\n};\n\nexports.validateAssetType = function (type) {\n  if (VALID_ASSET_TYPES.indexOf(type) === -1) {\n    throw new Error(\"Invalid asset type: \".concat(type, \". Must be one of \").concat(VALID_ASSET_TYPES.join(', ')));\n  }\n};\n\nexports.validateObject = function (op, val) {\n  if (val === null || _typeof(val) !== 'object' || Array.isArray(val)) {\n    throw new Error(\"\".concat(op, \"() takes an object of properties\"));\n  }\n};\n\nexports.requireDocumentId = function (op, doc) {\n  if (!doc._id) {\n    throw new Error(\"\".concat(op, \"() requires that the document contains an ID (\\\"_id\\\" property)\"));\n  }\n\n  exports.validateDocumentId(op, doc._id);\n};\n\nexports.validateDocumentId = function (op, id) {\n  if (typeof id !== 'string' || !/^[a-z0-9_.-]+$/i.test(id)) {\n    throw new Error(\"\".concat(op, \"(): \\\"\").concat(id, \"\\\" is not a valid document ID\"));\n  }\n};\n\nexports.validateInsert = function (at, selector, items) {\n  var signature = 'insert(at, selector, items)';\n\n  if (VALID_INSERT_LOCATIONS.indexOf(at) === -1) {\n    var valid = VALID_INSERT_LOCATIONS.map(function (loc) {\n      return \"\\\"\".concat(loc, \"\\\"\");\n    }).join(', ');\n    throw new Error(\"\".concat(signature, \" takes an \\\"at\\\"-argument which is one of: \").concat(valid));\n  }\n\n  if (typeof selector !== 'string') {\n    throw new Error(\"\".concat(signature, \" takes a \\\"selector\\\"-argument which must be a string\"));\n  }\n\n  if (!Array.isArray(items)) {\n    throw new Error(\"\".concat(signature, \" takes an \\\"items\\\"-argument which must be an array\"));\n  }\n};\n\nexports.hasDataset = function (config) {\n  if (!config.dataset) {\n    throw new Error('`dataset` must be provided to perform queries');\n  }\n\n  return config.dataset || '';\n};\n\nexports.requestTag = function (tag) {\n  if (typeof tag !== 'string' || !/^[a-z0-9._-]{1,75}$/i.test(tag)) {\n    throw new Error(\"Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.\");\n  }\n\n  return tag;\n};","\"use strict\";\n\nvar generateHelpUrl = require('./generateHelpUrl');\n\nvar once = require('./util/once');\n\nvar createWarningPrinter = function createWarningPrinter(message) {\n  return (// eslint-disable-next-line no-console\n    once(function () {\n      var _console;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return (_console = console).warn.apply(_console, [message.join(' ')].concat(args));\n    })\n  );\n};\n\nexports.printCdnWarning = createWarningPrinter(['You are not using the Sanity CDN. That means your data is always fresh, but the CDN is faster and', \"cheaper. Think about it! For more info, see \".concat(generateHelpUrl('js-client-cdn-configuration'), \".\"), 'To hide this warning, please set the `useCdn` option to either `true` or `false` when creating', 'the client.']);\nexports.printBrowserTokenWarning = createWarningPrinter(['You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.', \"See \".concat(generateHelpUrl('js-client-browser-token'), \" for more information and how to hide this warning.\")]);\nexports.printNoApiVersionSpecifiedWarning = createWarningPrinter(['Using the Sanity client without specifying an API version is deprecated.', \"See \".concat(generateHelpUrl('js-client-api-version'))]);","/* eslint-disable no-var */\nvar evs = require(\"event-source-polyfill\");\n\nmodule.exports = evs.EventSourcePolyfill;\n","const example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg'\n\nexport default function parseAssetId(ref: string) {\n  const [, id, dimensionString, format] = ref.split('-')\n\n  if (!id || !dimensionString || !format) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  const [imgWidthStr, imgHeightStr] = dimensionString.split('x')\n\n  const width = +imgWidthStr\n  const height = +imgHeightStr\n\n  const isValidAssetId = isFinite(width) && isFinite(height)\n  if (!isValidAssetId) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  return {id, width, height, format}\n}\n","import {\n  SanityAsset,\n  SanityImageObject,\n  SanityImageSource,\n  SanityImageWithAssetStub,\n  SanityReference,\n} from './types'\n\nconst isRef = (src: SanityImageSource): src is SanityReference => {\n  const source = src as SanityReference\n  return source ? typeof source._ref === 'string' : false\n}\n\nconst isAsset = (src: SanityImageSource): src is SanityAsset => {\n  const source = src as SanityAsset\n  return source ? typeof source._id === 'string' : false\n}\n\nconst isAssetStub = (src: SanityImageSource): src is SanityImageWithAssetStub => {\n  const source = src as SanityImageWithAssetStub\n  return source && source.asset ? typeof source.asset.url === 'string' : false\n}\n\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nexport default function parseSource(source?: SanityImageSource) {\n  if (!source) {\n    return null\n  }\n\n  let image: SanityImageObject\n\n  if (typeof source === 'string' && isUrl(source)) {\n    // Someone passed an existing image url?\n    image = {\n      asset: {_ref: urlToId(source)},\n    }\n  } else if (typeof source === 'string') {\n    // Just an asset id\n    image = {\n      asset: {_ref: source},\n    }\n  } else if (isRef(source)) {\n    // We just got passed an asset directly\n    image = {\n      asset: source,\n    }\n  } else if (isAsset(source)) {\n    // If we were passed an image asset document\n    image = {\n      asset: {\n        _ref: source._id || '',\n      },\n    }\n  } else if (isAssetStub(source)) {\n    // If we were passed a partial asset (`url`, but no `_id`)\n    image = {\n      asset: {\n        _ref: urlToId(source.asset.url),\n      },\n    }\n  } else if (typeof source.asset === 'object') {\n    // Probably an actual image with materialized asset\n    image = source\n  } else {\n    // We got something that does not look like an image, or it is an image\n    // that currently isn't sporting an asset.\n    return null\n  }\n\n  const img = source as SanityImageObject\n  if (img.crop) {\n    image.crop = img.crop\n  }\n\n  if (img.hotspot) {\n    image.hotspot = img.hotspot\n  }\n\n  return applyDefaults(image)\n}\n\nfunction isUrl(url: string) {\n  return /^https?:\\/\\//.test(`${url}`)\n}\n\nfunction urlToId(url: string) {\n  const parts = url.split('/').slice(-1)\n  return `image-${parts[0]}`.replace(/\\.([a-z]+)$/, '-$1')\n}\n\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image: SanityImageObject) {\n  if (image.crop && image.hotspot) {\n    return image as Required<SanityImageObject>\n  }\n\n  // We need to pad in default values for crop or hotspot\n  const result = {...image}\n\n  if (!result.crop) {\n    result.crop = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n    }\n  }\n\n  if (!result.hotspot) {\n    result.hotspot = {\n      x: 0.5,\n      y: 0.5,\n      height: 1.0,\n      width: 1.0,\n    }\n  }\n\n  return result as Required<SanityImageObject>\n}\n","import parseAssetId from './parseAssetId'\nimport parseSource from './parseSource'\nimport {\n  CropSpec,\n  HotspotSpec,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAsset,\n  SanityAsset,\n  SanityImageFitResult,\n  SanityImageRect,\n  SanityReference,\n} from './types'\n\nexport const SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n  ['width', 'w'],\n  ['height', 'h'],\n  ['format', 'fm'],\n  ['download', 'dl'],\n  ['blur', 'blur'],\n  ['sharpen', 'sharp'],\n  ['invert', 'invert'],\n  ['orientation', 'or'],\n  ['minHeight', 'min-h'],\n  ['maxHeight', 'max-h'],\n  ['minWidth', 'min-w'],\n  ['maxWidth', 'max-w'],\n  ['quality', 'q'],\n  ['fit', 'fit'],\n  ['crop', 'crop'],\n  ['saturation', 'sat'],\n  ['auto', 'auto'],\n  ['dpr', 'dpr'],\n  ['pad', 'pad'],\n]\n\nexport default function urlForImage(options: ImageUrlBuilderOptions): string {\n  let spec = {...(options || {})}\n  const source = spec.source\n  delete spec.source\n\n  const image = parseSource(source)\n  if (!image) {\n    throw new Error(`Unable to resolve image URL from source (${JSON.stringify(source)})`)\n  }\n\n  const id = (image.asset as SanityReference)._ref || (image.asset as SanityAsset)._id || ''\n  const asset = parseAssetId(id)\n\n  // Compute crop rect in terms of pixel coordinates in the raw source image\n  const cropLeft = Math.round(image.crop.left * asset.width)\n  const cropTop = Math.round(image.crop.top * asset.height)\n  const crop = {\n    left: cropLeft,\n    top: cropTop,\n    width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n    height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n  }\n\n  // Compute hot spot rect in terms of pixel coordinates\n  const hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2\n  const hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2\n  const hotSpotCenterX = image.hotspot.x * asset.width\n  const hotSpotCenterY = image.hotspot.y * asset.height\n  const hotspot = {\n    left: hotSpotCenterX - hotSpotHorizontalRadius,\n    top: hotSpotCenterY - hotSpotVerticalRadius,\n    right: hotSpotCenterX + hotSpotHorizontalRadius,\n    bottom: hotSpotCenterY + hotSpotVerticalRadius,\n  }\n\n  // If irrelevant, or if we are requested to: don't perform crop/fit based on\n  // the crop/hotspot.\n  if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n    spec = {...spec, ...fit({crop, hotspot}, spec)}\n  }\n\n  return specToImageUrl({...spec, asset})\n}\n\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec: ImageUrlBuilderOptionsWithAsset) {\n  const cdnUrl = spec.baseUrl || 'https://cdn.sanity.io'\n  const filename = `${spec.asset.id}-${spec.asset.width}x${spec.asset.height}.${spec.asset.format}`\n  const baseUrl = `${cdnUrl}/images/${spec.projectId}/${spec.dataset}/${filename}`\n\n  const params = []\n\n  if (spec.rect) {\n    // Only bother url with a crop if it actually crops anything\n    const {left, top, width, height} = spec.rect\n    const isEffectiveCrop =\n      left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width\n\n    if (isEffectiveCrop) {\n      params.push(`rect=${left},${top},${width},${height}`)\n    }\n  }\n\n  if (spec.bg) {\n    params.push(`bg=${spec.bg}`)\n  }\n\n  if (spec.focalPoint) {\n    params.push(`fp-x=${spec.focalPoint.x}`)\n    params.push(`fp-y=${spec.focalPoint.y}`)\n  }\n\n  const flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('')\n  if (flip) {\n    params.push(`flip=${flip}`)\n  }\n\n  // Map from spec name to url param name, and allow using the actual param name as an alternative\n  SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach((mapping) => {\n    const [specName, param] = mapping\n    if (typeof spec[specName] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[specName])}`)\n    } else if (typeof spec[param] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[param])}`)\n    }\n  })\n\n  if (params.length === 0) {\n    return baseUrl\n  }\n\n  return `${baseUrl}?${params.join('&')}`\n}\n\nfunction fit(\n  source: {crop: CropSpec; hotspot: HotspotSpec},\n  spec: ImageUrlBuilderOptions\n): SanityImageFitResult {\n  let cropRect: SanityImageRect\n\n  const imgWidth = spec.width\n  const imgHeight = spec.height\n\n  // If we are not constraining the aspect ratio, we'll just use the whole crop\n  if (!(imgWidth && imgHeight)) {\n    return {width: imgWidth, height: imgHeight, rect: source.crop}\n  }\n\n  const crop = source.crop\n  const hotspot = source.hotspot\n\n  // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n  const desiredAspectRatio = imgWidth / imgHeight\n  const cropAspectRatio = crop.width / crop.height\n\n  if (cropAspectRatio > desiredAspectRatio) {\n    // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n    const height = Math.round(crop.height)\n    const width = Math.round(height * desiredAspectRatio)\n    const top = Math.max(0, Math.round(crop.top))\n\n    // Center output horizontally over hotspot\n    const hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left)\n    let left = Math.max(0, Math.round(hotspotXCenter - width / 2))\n\n    // Keep output within crop\n    if (left < crop.left) {\n      left = crop.left\n    } else if (left + width > crop.left + crop.width) {\n      left = crop.left + crop.width - width\n    }\n\n    cropRect = {left, top, width, height}\n  } else {\n    // The crop is taller than the desired ratio, we are cutting from top and bottom\n    const width = crop.width\n    const height = Math.round(width / desiredAspectRatio)\n    const left = Math.max(0, Math.round(crop.left))\n\n    // Center output vertically over hotspot\n    const hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top)\n    let top = Math.max(0, Math.round(hotspotYCenter - height / 2))\n\n    // Keep output rect within crop\n    if (top < crop.top) {\n      top = crop.top\n    } else if (top + height > crop.top + crop.height) {\n      top = crop.top + crop.height - height\n    }\n\n    cropRect = {left, top, width, height}\n  }\n\n  return {\n    width: imgWidth,\n    height: imgHeight,\n    rect: cropRect,\n  }\n}\n\n// For backwards-compatibility\nexport {parseSource}\n","import {\n  AutoMode,\n  CropMode,\n  FitMode,\n  ImageFormat,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAliases,\n  Orientation,\n  SanityClientLike,\n  SanityImageSource,\n  SanityProjectDetails,\n} from './types'\nimport urlForImage, {SPEC_NAME_TO_URL_NAME_MAPPINGS} from './urlForImage'\n\nconst validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min']\nconst validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy']\nconst validAutoModes = ['format']\n\nfunction isSanityClientLike(client?: SanityClientLike): client is SanityClientLike {\n  return client ? typeof client.clientConfig === 'object' : false\n}\n\nfunction rewriteSpecName(key: string) {\n  const specs = SPEC_NAME_TO_URL_NAME_MAPPINGS\n  for (const entry of specs) {\n    const [specName, param] = entry\n    if (key === specName || key === param) {\n      return specName\n    }\n  }\n\n  return key\n}\n\nexport default function urlBuilder(options?: SanityClientLike | SanityProjectDetails) {\n  // Did we get a SanityClient?\n  const client = options as SanityClientLike\n  if (isSanityClientLike(client)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = client.clientConfig\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Or just accept the options as given\n  return new ImageUrlBuilder(null, options as ImageUrlBuilderOptions)\n}\n\nexport class ImageUrlBuilder {\n  public options: ImageUrlBuilderOptions\n\n  constructor(parent: ImageUrlBuilder | null, options: ImageUrlBuilderOptions) {\n    this.options = parent\n      ? {...(parent.options || {}), ...(options || {})} // Merge parent options\n      : {...(options || {})} // Copy options\n  }\n\n  withOptions(options: Partial<ImageUrlBuilderOptionsWithAliases>) {\n    const baseUrl = options.baseUrl || this.options.baseUrl\n\n    const newOptions: {[key: string]: any} = {baseUrl}\n    for (const key in options) {\n      if (options.hasOwnProperty(key)) {\n        const specKey = rewriteSpecName(key)\n        newOptions[specKey] = options[key]\n      }\n    }\n\n    return new ImageUrlBuilder(this, {baseUrl, ...newOptions})\n  }\n\n  // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n  // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n  // studio, the 'image'-document must be provided.\n  image(source: SanityImageSource) {\n    return this.withOptions({source})\n  }\n\n  // Specify the dataset\n  dataset(dataset: string) {\n    return this.withOptions({dataset})\n  }\n\n  // Specify the projectId\n  projectId(projectId: string) {\n    return this.withOptions({projectId})\n  }\n\n  // Specify background color\n  bg(bg: string) {\n    return this.withOptions({bg})\n  }\n\n  // Set DPR scaling factor\n  dpr(dpr: number) {\n    // A DPR of 1 is the default - so only include it if we have a different value\n    return this.withOptions(dpr && dpr !== 1 ? {dpr} : {})\n  }\n\n  // Specify the width of the image in pixels\n  width(width: number) {\n    return this.withOptions({width})\n  }\n\n  // Specify the height of the image in pixels\n  height(height: number) {\n    return this.withOptions({height})\n  }\n\n  // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n  focalPoint(x: number, y: number) {\n    return this.withOptions({focalPoint: {x, y}})\n  }\n\n  maxWidth(maxWidth: number) {\n    return this.withOptions({maxWidth})\n  }\n\n  minWidth(minWidth: number) {\n    return this.withOptions({minWidth})\n  }\n\n  maxHeight(maxHeight: number) {\n    return this.withOptions({maxHeight})\n  }\n\n  minHeight(minHeight: number) {\n    return this.withOptions({minHeight})\n  }\n\n  // Specify width and height in pixels\n  size(width: number, height: number) {\n    return this.withOptions({width, height})\n  }\n\n  // Specify blur between 0 and 100\n  blur(blur: number) {\n    return this.withOptions({blur})\n  }\n\n  sharpen(sharpen: number) {\n    return this.withOptions({sharpen})\n  }\n\n  // Specify the desired rectangle of the image\n  rect(left: number, top: number, width: number, height: number) {\n    return this.withOptions({rect: {left, top, width, height}})\n  }\n\n  // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n  format(format: ImageFormat) {\n    return this.withOptions({format})\n  }\n\n  invert(invert: boolean) {\n    return this.withOptions({invert})\n  }\n\n  // Rotation in degrees 0, 90, 180, 270\n  orientation(orientation: Orientation) {\n    return this.withOptions({orientation})\n  }\n\n  // Compression quality 0-100\n  quality(quality: number) {\n    return this.withOptions({quality})\n  }\n\n  // Make it a download link. Parameter is default filename.\n  forceDownload(download: boolean | string) {\n    return this.withOptions({download})\n  }\n\n  // Flip image horizontally\n  flipHorizontal() {\n    return this.withOptions({flipHorizontal: true})\n  }\n\n  // Flip image vertically\n  flipVertical() {\n    return this.withOptions({flipVertical: true})\n  }\n\n  // Ignore crop/hotspot from image record, even when present\n  ignoreImageParams() {\n    return this.withOptions({ignoreImageParams: true})\n  }\n\n  fit(value: FitMode) {\n    if (validFits.indexOf(value) === -1) {\n      throw new Error(`Invalid fit mode \"${value}\"`)\n    }\n\n    return this.withOptions({fit: value})\n  }\n\n  crop(value: CropMode) {\n    if (validCrops.indexOf(value) === -1) {\n      throw new Error(`Invalid crop mode \"${value}\"`)\n    }\n\n    return this.withOptions({crop: value})\n  }\n\n  // Saturation\n  saturation(saturation: number) {\n    return this.withOptions({saturation})\n  }\n\n  auto(value: AutoMode) {\n    if (validAutoModes.indexOf(value) === -1) {\n      throw new Error(`Invalid auto mode \"${value}\"`)\n    }\n\n    return this.withOptions({auto: value})\n  }\n\n  // Specify the number of pixels to pad the image\n  pad(pad: number) {\n    return this.withOptions({pad})\n  }\n\n  // Gets the url based on the submitted parameters\n  url() {\n    return urlForImage(this.options)\n  }\n\n  // Alias for url()\n  toString() {\n    return this.url()\n  }\n}\n","/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          // Remove the lastEventId parameter if it's already part of the request URL.\r\n          var i = url.indexOf(\"?\");\r\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\r\n            return paramName === lastEventIdQueryParameterName ? '' : p;\r\n          });\r\n          // Append the current lastEventId to the request URL.\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n","module.exports = require('./lib-node')\n","const pubsub = require('nano-pubsub')\nconst middlewareReducer = require('./util/middlewareReducer')\nconst processOptions = require('./middleware/defaultOptionsProcessor')\nconst validateOptions = require('./middleware/defaultOptionsValidator')\nconst httpRequester = require('./request') // node-request in node, browser-request in browsers\n\nconst channelNames = ['request', 'response', 'progress', 'error', 'abort']\nconst middlehooks = [\n  'processOptions',\n  'validateOptions',\n  'interceptRequest',\n  'finalizeOptions',\n  'onRequest',\n  'onResponse',\n  'onError',\n  'onReturn',\n  'onHeaders'\n]\n\nmodule.exports = function createRequester(initMiddleware = [], httpRequest = httpRequester) {\n  const loadedMiddleware = []\n  const middleware = middlehooks.reduce(\n    (ware, name) => {\n      ware[name] = ware[name] || []\n      return ware\n    },\n    {\n      processOptions: [processOptions],\n      validateOptions: [validateOptions]\n    }\n  )\n\n  function request(opts) {\n    const channels = channelNames.reduce((target, name) => {\n      target[name] = pubsub()\n      return target\n    }, {})\n\n    // Prepare a middleware reducer that can be reused throughout the lifecycle\n    const applyMiddleware = middlewareReducer(middleware)\n\n    // Parse the passed options\n    const options = applyMiddleware('processOptions', opts)\n\n    // Validate the options\n    applyMiddleware('validateOptions', options)\n\n    // Build a context object we can pass to child handlers\n    const context = {options, channels, applyMiddleware}\n\n    // We need to hold a reference to the current, ongoing request,\n    // in order to allow cancellation. In the case of the retry middleware,\n    // a new request might be triggered\n    let ongoingRequest = null\n    const unsubscribe = channels.request.subscribe(ctx => {\n      // Let request adapters (node/browser) perform the actual request\n      ongoingRequest = httpRequest(ctx, (err, res) => onResponse(err, res, ctx))\n    })\n\n    // If we abort the request, prevent further requests from happening,\n    // and be sure to cancel any ongoing request (obviously)\n    channels.abort.subscribe(() => {\n      unsubscribe()\n      if (ongoingRequest) {\n        ongoingRequest.abort()\n      }\n    })\n\n    // See if any middleware wants to modify the return value - for instance\n    // the promise or observable middlewares\n    const returnValue = applyMiddleware('onReturn', channels, context)\n\n    // If return value has been modified by a middleware, we expect the middleware\n    // to publish on the 'request' channel. If it hasn't been modified, we want to\n    // trigger it right away\n    if (returnValue === channels) {\n      channels.request.publish(context)\n    }\n\n    return returnValue\n\n    function onResponse(reqErr, res, ctx) {\n      let error = reqErr\n      let response = res\n\n      // We're processing non-errors first, in case a middleware converts the\n      // response into an error (for instance, status >= 400 == HttpError)\n      if (!error) {\n        try {\n          response = applyMiddleware('onResponse', res, ctx)\n        } catch (err) {\n          response = null\n          error = err\n        }\n      }\n\n      // Apply error middleware - if middleware return the same (or a different) error,\n      // publish as an error event. If we *don't* return an error, assume it has been handled\n      error = error && applyMiddleware('onError', error, ctx)\n\n      // Figure out if we should publish on error/response channels\n      if (error) {\n        channels.error.publish(error)\n      } else if (response) {\n        channels.response.publish(response)\n      }\n    }\n  }\n\n  request.use = function use(newMiddleware) {\n    if (!newMiddleware) {\n      throw new Error('Tried to add middleware that resolved to falsey value')\n    }\n\n    if (typeof newMiddleware === 'function') {\n      throw new Error(\n        'Tried to add middleware that was a function. It probably expects you to pass options to it.'\n      )\n    }\n\n    if (newMiddleware.onReturn && middleware.onReturn.length > 0) {\n      throw new Error(\n        'Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event'\n      )\n    }\n\n    middlehooks.forEach(key => {\n      if (newMiddleware[key]) {\n        middleware[key].push(newMiddleware[key])\n      }\n    })\n\n    loadedMiddleware.push(newMiddleware)\n    return request\n  }\n\n  request.clone = function clone() {\n    return createRequester(loadedMiddleware)\n  }\n\n  initMiddleware.forEach(request.use)\n\n  return request\n}\n","const objectAssign = require('object-assign')\nconst urlParse = require('url-parse')\n\nconst isReactNative = typeof navigator === 'undefined' ? false : navigator.product === 'ReactNative'\n\nconst has = Object.prototype.hasOwnProperty\nconst defaultOptions = {timeout: isReactNative ? 60000 : 120000}\n\nmodule.exports = opts => {\n  const options =\n    typeof opts === 'string'\n      ? objectAssign({url: opts}, defaultOptions)\n      : objectAssign({}, defaultOptions, opts)\n\n  // Parse URL into parts\n  const url = urlParse(\n    options.url,\n    {}, // Don't use current browser location\n    true // Parse query strings\n  )\n\n  // Normalize timeouts\n  options.timeout = normalizeTimeout(options.timeout)\n\n  // Shallow-merge (override) existing query params\n  if (options.query) {\n    url.query = objectAssign({}, url.query, removeUndefined(options.query))\n  }\n\n  // Implicit POST if we have not specified a method but have a body\n  options.method =\n    options.body && !options.method ? 'POST' : (options.method || 'GET').toUpperCase()\n\n  // Stringify URL\n  options.url = url.toString(stringifyQueryString)\n\n  return options\n}\n\nfunction stringifyQueryString(obj) {\n  const pairs = []\n  for (const key in obj) {\n    if (has.call(obj, key)) {\n      push(key, obj[key])\n    }\n  }\n\n  return pairs.length ? pairs.join('&') : ''\n\n  function push(key, val) {\n    if (Array.isArray(val)) {\n      val.forEach(item => push(key, item))\n    } else {\n      pairs.push([key, val].map(encodeURIComponent).join('='))\n    }\n  }\n}\n\nfunction normalizeTimeout(time) {\n  if (time === false || time === 0) {\n    return false\n  }\n\n  if (time.connect || time.socket) {\n    return time\n  }\n\n  const delay = Number(time)\n  if (isNaN(delay)) {\n    return normalizeTimeout(defaultOptions.timeout)\n  }\n\n  return {connect: delay, socket: delay}\n}\n\nfunction removeUndefined(obj) {\n  const target = {}\n  for (const key in obj) {\n    if (obj[key] !== undefined) {\n      target[key] = obj[key]\n    }\n  }\n  return target\n}\n","const validUrl = /^https?:\\/\\//i\n\nmodule.exports = options => {\n  if (!validUrl.test(options.url)) {\n    throw new Error(`\"${options.url}\" is not a valid URL`)\n  }\n}\n","const objectAssign = require('object-assign')\nconst isPlainObject = require('is-plain-object')\n\nconst serializeTypes = ['boolean', 'string', 'number']\nconst isBuffer = obj =>\n  !!obj.constructor &&\n  typeof obj.constructor.isBuffer === 'function' &&\n  obj.constructor.isBuffer(obj)\n\nmodule.exports = () => ({\n  processOptions: options => {\n    const body = options.body\n    if (!body) {\n      return options\n    }\n\n    const isStream = typeof body.pipe === 'function'\n    const shouldSerialize =\n      !isStream &&\n      !isBuffer(body) &&\n      (serializeTypes.indexOf(typeof body) !== -1 || Array.isArray(body) || isPlainObject(body))\n\n    if (!shouldSerialize) {\n      return options\n    }\n\n    return objectAssign({}, options, {\n      body: JSON.stringify(options.body),\n      headers: objectAssign({}, options.headers, {\n        'Content-Type': 'application/json'\n      })\n    })\n  }\n})\n","const objectAssign = require('object-assign')\n\nmodule.exports = opts => ({\n  onResponse: response => {\n    const contentType = response.headers['content-type'] || ''\n    const shouldDecode = (opts && opts.force) || contentType.indexOf('application/json') !== -1\n    if (!response.body || !contentType || !shouldDecode) {\n      return response\n    }\n\n    return objectAssign({}, response, {body: tryParse(response.body)})\n  },\n\n  processOptions: options =>\n    objectAssign({}, options, {\n      headers: objectAssign({Accept: 'application/json'}, options.headers)\n    })\n})\n\nfunction tryParse(body) {\n  try {\n    return JSON.parse(body)\n  } catch (err) {\n    err.message = `Failed to parsed response body as JSON: ${err.message}`\n    throw err\n  }\n}\n","const global = require('../util/global')\nconst objectAssign = require('object-assign')\n\nmodule.exports = (opts = {}) => {\n  const Observable = opts.implementation || global.Observable\n  if (!Observable) {\n    throw new Error(\n      '`Observable` is not available in global scope, and no implementation was passed'\n    )\n  }\n\n  return {\n    onReturn: (channels, context) =>\n      new Observable(observer => {\n        channels.error.subscribe(err => observer.error(err))\n        channels.progress.subscribe(event => observer.next(objectAssign({type: 'progress'}, event)))\n        channels.response.subscribe(response => {\n          observer.next(objectAssign({type: 'response'}, response))\n          observer.complete()\n        })\n\n        channels.request.publish(context)\n        return () => channels.abort.publish()\n      })\n  }\n}\n","module.exports = () => ({\n  onRequest: evt => {\n    if (evt.adapter !== 'xhr') {\n      return\n    }\n\n    const xhr = evt.request\n    const context = evt.context\n\n    if ('upload' in xhr && 'onprogress' in xhr.upload) {\n      xhr.upload.onprogress = handleProgress('upload')\n    }\n\n    if ('onprogress' in xhr) {\n      xhr.onprogress = handleProgress('download')\n    }\n\n    function handleProgress(stage) {\n      return event => {\n        const percent = event.lengthComputable ? (event.loaded / event.total) * 100 : -1\n        context.channels.progress.publish({\n          stage,\n          percent,\n          total: event.total,\n          loaded: event.loaded,\n          lengthComputable: event.lengthComputable\n        })\n      }\n    }\n  }\n})\n","module.exports = require('./node-progress')\n","/* eslint max-depth: [\"error\", 4] */\nconst sameOrigin = require('same-origin')\nconst parseHeaders = require('parse-headers')\nconst FetchXhr = require('./browser/fetchXhr')\n\nconst noop = function() {\n  /* intentional noop */\n}\n\nconst win = typeof window === 'undefined' ? undefined : window\nconst adapter = win ? 'xhr' : 'fetch'\n\nlet XmlHttpRequest = typeof XMLHttpRequest === 'function' ? XMLHttpRequest : noop\nconst hasXhr2 = 'withCredentials' in new XmlHttpRequest()\n// eslint-disable-next-line no-undef\nconst XDR = typeof XDomainRequest === 'undefined' ? undefined : XDomainRequest\nlet CrossDomainRequest = hasXhr2 ? XmlHttpRequest : XDR\n\n// Fallback to fetch-based XHR polyfill for non-browser environments like Workers\nif (!win) {\n  XmlHttpRequest = FetchXhr\n  CrossDomainRequest = FetchXhr\n}\n\nmodule.exports = (context, callback) => {\n  const opts = context.options\n  const options = context.applyMiddleware('finalizeOptions', opts)\n  const timers = {}\n\n  // Deep-checking window.location because of react native, where `location` doesn't exist\n  const cors = win && win.location && !sameOrigin(win.location.href, options.url)\n\n  // Allow middleware to inject a response, for instance in the case of caching or mocking\n  const injectedResponse = context.applyMiddleware('interceptRequest', undefined, {\n    adapter,\n    context\n  })\n\n  // If middleware injected a response, treat it as we normally would and return it\n  // Do note that the injected response has to be reduced to a cross-environment friendly response\n  if (injectedResponse) {\n    const cbTimer = setTimeout(callback, 0, null, injectedResponse)\n    const cancel = () => clearTimeout(cbTimer)\n    return {abort: cancel}\n  }\n\n  // We'll want to null out the request on success/failure\n  let xhr = cors ? new CrossDomainRequest() : new XmlHttpRequest()\n\n  const isXdr = win && win.XDomainRequest && xhr instanceof win.XDomainRequest\n  const headers = options.headers\n  const delays = options.timeout\n\n  // Request state\n  let aborted = false\n  let loaded = false\n  let timedOut = false\n\n  // Apply event handlers\n  xhr.onerror = onError\n  xhr.ontimeout = onError\n  xhr.onabort = () => {\n    stopTimers(true)\n    aborted = true\n  }\n\n  // IE9 must have onprogress be set to a unique function\n  xhr.onprogress = () => {\n    /* intentional noop */\n  }\n\n  const loadEvent = isXdr ? 'onload' : 'onreadystatechange'\n  xhr[loadEvent] = () => {\n    // Prevent request from timing out\n    resetTimers()\n\n    if (aborted || (xhr.readyState !== 4 && !isXdr)) {\n      return\n    }\n\n    // Will be handled by onError\n    if (xhr.status === 0) {\n      return\n    }\n\n    onLoad()\n  }\n\n  // @todo two last options to open() is username/password\n  xhr.open(\n    options.method,\n    options.url,\n    true // Always async\n  )\n\n  // Some options need to be applied after open\n  xhr.withCredentials = !!options.withCredentials\n\n  // Set headers\n  if (headers && xhr.setRequestHeader) {\n    for (const key in headers) {\n      if (headers.hasOwnProperty(key)) {\n        xhr.setRequestHeader(key, headers[key])\n      }\n    }\n  } else if (headers && isXdr) {\n    throw new Error('Headers cannot be set on an XDomainRequest object')\n  }\n\n  if (options.rawBody) {\n    xhr.responseType = 'arraybuffer'\n  }\n\n  // Let middleware know we're about to do a request\n  context.applyMiddleware('onRequest', {options, adapter, request: xhr, context})\n\n  xhr.send(options.body || null)\n\n  // Figure out which timeouts to use (if any)\n  if (delays) {\n    timers.connect = setTimeout(() => timeoutRequest('ETIMEDOUT'), delays.connect)\n  }\n\n  return {abort}\n\n  function abort() {\n    aborted = true\n\n    if (xhr) {\n      xhr.abort()\n    }\n  }\n\n  function timeoutRequest(code) {\n    timedOut = true\n    xhr.abort()\n    const error = new Error(\n      code === 'ESOCKETTIMEDOUT'\n        ? `Socket timed out on request to ${options.url}`\n        : `Connection timed out on request to ${options.url}`\n    )\n    error.code = code\n    context.channels.error.publish(error)\n  }\n\n  function resetTimers() {\n    if (!delays) {\n      return\n    }\n\n    stopTimers()\n    timers.socket = setTimeout(() => timeoutRequest('ESOCKETTIMEDOUT'), delays.socket)\n  }\n\n  function stopTimers(force) {\n    // Only clear the connect timeout if we've got a connection\n    if (force || aborted || (xhr.readyState >= 2 && timers.connect)) {\n      clearTimeout(timers.connect)\n    }\n\n    if (timers.socket) {\n      clearTimeout(timers.socket)\n    }\n  }\n\n  function onError(error) {\n    if (loaded) {\n      return\n    }\n\n    // Clean up\n    stopTimers(true)\n    loaded = true\n    xhr = null\n\n    // Annoyingly, details are extremely scarce and hidden from us.\n    // We only really know that it is a network error\n    const err = error || new Error(`Network error while attempting to reach ${options.url}`)\n    err.isNetworkError = true\n    err.request = options\n    callback(err)\n  }\n\n  function reduceResponse() {\n    let statusCode = xhr.status\n    let statusMessage = xhr.statusText\n\n    if (isXdr && statusCode === undefined) {\n      // IE8 CORS GET successful response doesn't have a status field, but body is fine\n      statusCode = 200\n    } else if (statusCode > 12000 && statusCode < 12156) {\n      // Yet another IE quirk where it emits weird status codes on network errors\n      // https://support.microsoft.com/en-us/kb/193625\n      return onError()\n    } else {\n      // Another IE bug where HTTP 204 somehow ends up as 1223\n      statusCode = xhr.status === 1223 ? 204 : xhr.status\n      statusMessage = xhr.status === 1223 ? 'No Content' : statusMessage\n    }\n\n    return {\n      body: xhr.response || xhr.responseText,\n      url: options.url,\n      method: options.method,\n      headers: isXdr ? {} : parseHeaders(xhr.getAllResponseHeaders()),\n      statusCode: statusCode,\n      statusMessage: statusMessage\n    }\n  }\n\n  function onLoad() {\n    if (aborted || loaded || timedOut) {\n      return\n    }\n\n    if (xhr.status === 0) {\n      onError(new Error('Unknown XHR error'))\n      return\n    }\n\n    // Prevent being called twice\n    stopTimers()\n    loaded = true\n    callback(null, reduceResponse())\n  }\n}\n","/**\n * Mimicks the XMLHttpRequest API with only the parts needed for get-it's XHR adapter\n */\nfunction FetchXhr() {\n  this.readyState = 0 // Unsent\n}\nFetchXhr.prototype.open = function(method, url) {\n  this._method = method\n  this._url = url\n  this._resHeaders = ''\n  this.readyState = 1 // Open\n  this.onreadystatechange()\n}\nFetchXhr.prototype.abort = function() {\n  if (this._controller) {\n    this._controller.abort()\n  }\n}\nFetchXhr.prototype.getAllResponseHeaders = function() {\n  return this._resHeaders\n}\nFetchXhr.prototype.setRequestHeader = function(key, value) {\n  this._headers = this._headers || {}\n  this._headers[key] = value\n}\nFetchXhr.prototype.send = function(body) {\n  // eslint-disable-next-line no-multi-assign\n  const ctrl = (this._controller = typeof AbortController === 'function' && new AbortController())\n  const textBody = this.responseType !== 'arraybuffer'\n  const options = {\n    method: this._method,\n    headers: this._headers,\n    signal: ctrl && ctrl.signal,\n    body\n  }\n\n  // Some environments (like CloudFlare workers) don't support credentials in\n  // RequestInitDict, and there doesn't seem to be any easy way to check for it,\n  // so for now let's just make do with a window check :/\n  if (typeof window !== 'undefined') {\n    options.credentials = this.withCredentials ? 'include' : 'omit'\n  }\n\n  fetch(this._url, options)\n    .then(res => {\n      res.headers.forEach((value, key) => {\n        this._resHeaders += `${key}: ${value}\\r\\n`\n      })\n      this.status = res.status\n      this.statusText = res.statusText\n      this.readyState = 3 // Loading\n      return textBody ? res.text() : res.arrayBuffer()\n    })\n    .then(resBody => {\n      if (textBody) {\n        this.responseText = resBody\n      } else {\n        this.response = resBody\n      }\n      this.readyState = 4 // Done\n      this.onreadystatechange()\n    })\n    .catch(err => {\n      if (err.name === 'AbortError') {\n        this.onabort()\n        return\n      }\n\n      this.onerror(err)\n    })\n}\n\nmodule.exports = FetchXhr\n","module.exports = require('./node-request')\n","/* global globalThis */\n/* eslint-disable no-negated-condition */\nif (typeof globalThis !== 'undefined') {\n  module.exports = globalThis\n} else if (typeof window !== 'undefined') {\n  module.exports = window\n} else if (typeof global !== 'undefined') {\n  module.exports = global\n} else if (typeof self !== 'undefined') {\n  module.exports = self\n} else {\n  module.exports = {}\n}\n","module.exports = middleware => {\n  const applyMiddleware = (hook, defaultValue, ...args) => {\n    const bailEarly = hook === 'onError'\n\n    let value = defaultValue\n    for (let i = 0; i < middleware[hook].length; i++) {\n      const handler = middleware[hook][i]\n      value = handler(value, ...args)\n\n      if (bailEarly && !value) {\n        break\n      }\n    }\n\n    return value\n  }\n\n  return applyMiddleware\n}\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","// ISC @ Julien Fontanet\n\n\"use strict\";\n\n// ===================================================================\n\nvar construct = typeof Reflect !== \"undefined\" ? Reflect.construct : undefined;\nvar defineProperty = Object.defineProperty;\n\n// -------------------------------------------------------------------\n\nvar captureStackTrace = Error.captureStackTrace;\nif (captureStackTrace === undefined) {\n  captureStackTrace = function captureStackTrace(error) {\n    var container = new Error();\n\n    defineProperty(error, \"stack\", {\n      configurable: true,\n      get: function getStack() {\n        var stack = container.stack;\n\n        // Replace property with value for faster future accesses.\n        defineProperty(this, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n\n        return stack;\n      },\n      set: function setStack(stack) {\n        defineProperty(error, \"stack\", {\n          configurable: true,\n          value: stack,\n          writable: true,\n        });\n      },\n    });\n  };\n}\n\n// -------------------------------------------------------------------\n\nfunction BaseError(message) {\n  if (message !== undefined) {\n    defineProperty(this, \"message\", {\n      configurable: true,\n      value: message,\n      writable: true,\n    });\n  }\n\n  var cname = this.constructor.name;\n  if (cname !== undefined && cname !== this.name) {\n    defineProperty(this, \"name\", {\n      configurable: true,\n      value: cname,\n      writable: true,\n    });\n  }\n\n  captureStackTrace(this, this.constructor);\n}\n\nBaseError.prototype = Object.create(Error.prototype, {\n  // See: https://github.com/JsCommunity/make-error/issues/4\n  constructor: {\n    configurable: true,\n    value: BaseError,\n    writable: true,\n  },\n});\n\n// -------------------------------------------------------------------\n\n// Sets the name of a function if possible (depends of the JS engine).\nvar setFunctionName = (function() {\n  function setFunctionName(fn, name) {\n    return defineProperty(fn, \"name\", {\n      configurable: true,\n      value: name,\n    });\n  }\n  try {\n    var f = function() {};\n    setFunctionName(f, \"foo\");\n    if (f.name === \"foo\") {\n      return setFunctionName;\n    }\n  } catch (_) {}\n})();\n\n// -------------------------------------------------------------------\n\nfunction makeError(constructor, super_) {\n  if (super_ == null || super_ === Error) {\n    super_ = BaseError;\n  } else if (typeof super_ !== \"function\") {\n    throw new TypeError(\"super_ should be a function\");\n  }\n\n  var name;\n  if (typeof constructor === \"string\") {\n    name = constructor;\n    constructor =\n      construct !== undefined\n        ? function() {\n            return construct(super_, arguments, this.constructor);\n          }\n        : function() {\n            super_.apply(this, arguments);\n          };\n\n    // If the name can be set, do it once and for all.\n    if (setFunctionName !== undefined) {\n      setFunctionName(constructor, name);\n      name = undefined;\n    }\n  } else if (typeof constructor !== \"function\") {\n    throw new TypeError(\"constructor should be either a string or a function\");\n  }\n\n  // Also register the super constructor also as `constructor.super_` just\n  // like Node's `util.inherits()`.\n  //\n  // eslint-disable-next-line dot-notation\n  constructor.super_ = constructor[\"super\"] = super_;\n\n  var properties = {\n    constructor: {\n      configurable: true,\n      value: constructor,\n      writable: true,\n    },\n  };\n\n  // If the name could not be set on the constructor, set it on the\n  // prototype.\n  if (name !== undefined) {\n    properties.name = {\n      configurable: true,\n      value: name,\n      writable: true,\n    };\n  }\n  constructor.prototype = Object.create(super_.prototype, properties);\n\n  return constructor;\n}\nexports = module.exports = makeError;\nexports.BaseError = BaseError;\n","module.exports = function Pubsub() {\n  var subscribers = []\n  return {\n    subscribe: subscribe,\n    publish: publish\n  }\n  function subscribe(subscriber) {\n    subscribers.push(subscriber)\n    return function unsubscribe() {\n      var idx = subscribers.indexOf(subscriber)\n      if (idx > -1) {\n        subscribers.splice(idx, 1)\n      }\n    }\n  }\n  function publish() {\n    for (var i = 0; i < subscribers.length; i++) {\n      subscribers[i].apply(null, arguments)\n    }\n  }\n}","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","import { Operator } from './Operator';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { TeardownLogic, OperatorFunction, PartialObserver, Subscribable } from './types';\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { iif } from './observable/iif';\nimport { throwError } from './observable/throwError';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\n\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport class Observable<T> implements Subscribable<T> {\n\n  /** Internal implementation detail, do not use directly. */\n  public _isScalar: boolean = false;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  source: Observable<any>;\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  operator: Operator<any, T>;\n\n  /**\n   * @constructor\n   * @param {Function} subscribe the function that is called when the Observable is\n   * initially subscribed to. This function is given a Subscriber, to which new values\n   * can be `next`ed, or an `error` method can be called to raise an error, or\n   * `complete` can be called to notify of a successful completion.\n   */\n  constructor(subscribe?: (this: Observable<T>, subscriber: Subscriber<T>) => TeardownLogic) {\n    if (subscribe) {\n      this._subscribe = subscribe;\n    }\n  }\n\n  // HACK: Since TypeScript inherits static properties too, we have to\n  // fight against TypeScript here so Subject can have a different static create signature\n  /**\n   * Creates a new cold Observable by calling the Observable constructor\n   * @static true\n   * @owner Observable\n   * @method create\n   * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n   * @return {Observable} a new cold observable\n   * @nocollapse\n   * @deprecated use new Observable() instead\n   */\n  static create: Function = <T>(subscribe?: (subscriber: Subscriber<T>) => TeardownLogic) => {\n    return new Observable<T>(subscribe);\n  }\n\n  /**\n   * Creates a new Observable, with this Observable as the source, and the passed\n   * operator defined as the new observable's operator.\n   * @method lift\n   * @param {Operator} operator the operator defining the operation to take on the observable\n   * @return {Observable} a new observable with the Operator applied\n   */\n  lift<R>(operator: Operator<T, R>): Observable<R> {\n    const observable = new Observable<R>();\n    observable.source = this;\n    observable.operator = operator;\n    return observable;\n  }\n\n  subscribe(observer?: PartialObserver<T>): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: null | undefined, error: null | undefined, complete: () => void): Subscription;\n  /** @deprecated Use an observer instead of an error callback */\n  subscribe(next: null | undefined, error: (error: any) => void, complete?: () => void): Subscription;\n  /** @deprecated Use an observer instead of a complete callback */\n  subscribe(next: (value: T) => void, error: null | undefined, complete: () => void): Subscription;\n  subscribe(next?: (value: T) => void, error?: (error: any) => void, complete?: () => void): Subscription;\n  /**\n   * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n   *\n   * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n   *\n   * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n   * might be for example a function that you passed to Observable's constructor, but most of the time it is\n   * a library implementation, which defines what will be emitted by an Observable, and when it be will emitted. This means\n   * that calling `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n   * the thought.\n   *\n   * Apart from starting the execution of an Observable, this method allows you to listen for values\n   * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n   * of the following ways.\n   *\n   * The first way is creating an object that implements {@link Observer} interface. It should have methods\n   * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n   * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n   * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n   * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n   * do anything, you can simply omit it. Note however, if the `error` method is not provided, all errors will\n   * be left uncaught.\n   *\n   * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n   * This means you can provide three functions as arguments to `subscribe`, where the first function is equivalent\n   * of a `next` method, the second of an `error` method and the third of a `complete` method. Just as in case of Observer,\n   * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n   * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n   * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n   *\n   * Whichever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n   * This object allows you to call `unsubscribe` on it, which in turn will stop the work that an Observable does and will clean\n   * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n   * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n   *\n   * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n   * It is an Observable itself that decides when these functions will be called. For example {@link of}\n   * by default emits all its values synchronously. Always check documentation for how given Observable\n   * will behave when subscribed and if its default behavior can be modified with a `scheduler`.\n   *\n   * ## Example\n   * ### Subscribe with an Observer\n   * ```ts\n   * import { of } from 'rxjs';\n   *\n   * const sumObserver = {\n   *   sum: 0,\n   *   next(value) {\n   *     console.log('Adding: ' + value);\n   *     this.sum = this.sum + value;\n   *   },\n   *   error() {\n   *     // We actually could just remove this method,\n   *     // since we do not really care about errors right now.\n   *   },\n   *   complete() {\n   *     console.log('Sum equals: ' + this.sum);\n   *   }\n   * };\n   *\n   * of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n   *   .subscribe(sumObserver);\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Subscribe with functions\n   * ```ts\n   * import { of } from 'rxjs'\n   *\n   * let sum = 0;\n   *\n   * of(1, 2, 3).subscribe(\n   *   value => {\n   *     console.log('Adding: ' + value);\n   *     sum = sum + value;\n   *   },\n   *   undefined,\n   *   () => console.log('Sum equals: ' + sum)\n   * );\n   *\n   * // Logs:\n   * // \"Adding: 1\"\n   * // \"Adding: 2\"\n   * // \"Adding: 3\"\n   * // \"Sum equals: 6\"\n   * ```\n   *\n   * ### Cancel a subscription\n   * ```ts\n   * import { interval } from 'rxjs';\n   *\n   * const subscription = interval(1000).subscribe(\n   *   num => console.log(num),\n   *   undefined,\n   *   () => {\n   *     // Will not be called, even when cancelling subscription.\n   *     console.log('completed!');\n   *   }\n   * );\n   *\n   * setTimeout(() => {\n   *   subscription.unsubscribe();\n   *   console.log('unsubscribed!');\n   * }, 2500);\n   *\n   * // Logs:\n   * // 0 after 1s\n   * // 1 after 2s\n   * // \"unsubscribed!\" after 2.5s\n   * ```\n   *\n   * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n   *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n   *  Observable.\n   * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n   *  the error will be thrown as unhandled.\n   * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n   * @return {ISubscription} a subscription reference to the registered handlers\n   * @method subscribe\n   */\n  subscribe(observerOrNext?: PartialObserver<T> | ((value: T) => void),\n            error?: (error: any) => void,\n            complete?: () => void): Subscription {\n\n    const { operator } = this;\n    const sink = toSubscriber(observerOrNext, error, complete);\n\n    if (operator) {\n      sink.add(operator.call(sink, this.source));\n    } else {\n      sink.add(\n        this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n        this._subscribe(sink) :\n        this._trySubscribe(sink)\n      );\n    }\n\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      if (sink.syncErrorThrowable) {\n        sink.syncErrorThrowable = false;\n        if (sink.syncErrorThrown) {\n          throw sink.syncErrorValue;\n        }\n      }\n    }\n\n    return sink;\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _trySubscribe(sink: Subscriber<T>): TeardownLogic {\n    try {\n      return this._subscribe(sink);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        sink.syncErrorThrown = true;\n        sink.syncErrorValue = err;\n      }\n      if (canReportError(sink)) {\n        sink.error(err);\n      } else {\n        console.warn(err);\n      }\n    }\n  }\n\n  /**\n   * @method forEach\n   * @param {Function} next a handler for each value emitted by the observable\n   * @param {PromiseConstructor} [promiseCtor] a constructor function used to instantiate the Promise\n   * @return {Promise} a promise that either resolves on observable completion or\n   *  rejects with the handled error\n   */\n  forEach(next: (value: T) => void, promiseCtor?: PromiseConstructorLike): Promise<void> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor<void>((resolve, reject) => {\n      // Must be declared in a separate statement to avoid a ReferenceError when\n      // accessing subscription below in the closure due to Temporal Dead Zone.\n      let subscription: Subscription;\n      subscription = this.subscribe((value) => {\n        try {\n          next(value);\n        } catch (err) {\n          reject(err);\n          if (subscription) {\n            subscription.unsubscribe();\n          }\n        }\n      }, reject, resolve);\n    }) as Promise<void>;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _subscribe(subscriber: Subscriber<any>): TeardownLogic {\n    const { source } = this;\n    return source && source.subscribe(subscriber);\n  }\n\n  // `if` and `throw` are special snow flakes, the compiler sees them as reserved words. Deprecated in\n  // favor of iif and throwError functions.\n  /**\n   * @nocollapse\n   * @deprecated In favor of iif creation function: import { iif } from 'rxjs';\n   */\n  static if: typeof iif;\n  /**\n   * @nocollapse\n   * @deprecated In favor of throwError creation function: import { throwError } from 'rxjs';\n   */\n  static throw: typeof throwError;\n\n  /**\n   * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n   * @method Symbol.observable\n   * @return {Observable} this instance of the observable\n   */\n  [Symbol_observable]() {\n    return this;\n  }\n\n  /* tslint:disable:max-line-length */\n  pipe(): Observable<T>;\n  pipe<A>(op1: OperatorFunction<T, A>): Observable<A>;\n  pipe<A, B>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>): Observable<B>;\n  pipe<A, B, C>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>): Observable<C>;\n  pipe<A, B, C, D>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>): Observable<D>;\n  pipe<A, B, C, D, E>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>): Observable<E>;\n  pipe<A, B, C, D, E, F>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>): Observable<F>;\n  pipe<A, B, C, D, E, F, G>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>): Observable<G>;\n  pipe<A, B, C, D, E, F, G, H>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>): Observable<H>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>): Observable<I>;\n  pipe<A, B, C, D, E, F, G, H, I>(op1: OperatorFunction<T, A>, op2: OperatorFunction<A, B>, op3: OperatorFunction<B, C>, op4: OperatorFunction<C, D>, op5: OperatorFunction<D, E>, op6: OperatorFunction<E, F>, op7: OperatorFunction<F, G>, op8: OperatorFunction<G, H>, op9: OperatorFunction<H, I>, ...operations: OperatorFunction<any, any>[]): Observable<{}>;\n  /* tslint:enable:max-line-length */\n\n  /**\n   * Used to stitch together functional operators into a chain.\n   * @method pipe\n   * @return {Observable} the Observable result of all of the operators having\n   * been called in the order they were passed in.\n   *\n   * ### Example\n   * ```ts\n   * import { interval } from 'rxjs';\n   * import { map, filter, scan } from 'rxjs/operators';\n   *\n   * interval(1000)\n   *   .pipe(\n   *     filter(x => x % 2 === 0),\n   *     map(x => x + x),\n   *     scan((acc, x) => acc + x)\n   *   )\n   *   .subscribe(x => console.log(x))\n   * ```\n   */\n  pipe(...operations: OperatorFunction<any, any>[]): Observable<any> {\n    if (operations.length === 0) {\n      return this as any;\n    }\n\n    return pipeFromArray(operations)(this);\n  }\n\n  /* tslint:disable:max-line-length */\n  toPromise<T>(this: Observable<T>): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: typeof Promise): Promise<T>;\n  toPromise<T>(this: Observable<T>, PromiseCtor: PromiseConstructorLike): Promise<T>;\n  /* tslint:enable:max-line-length */\n\n  toPromise(promiseCtor?: PromiseConstructorLike): Promise<T> {\n    promiseCtor = getPromiseCtor(promiseCtor);\n\n    return new promiseCtor((resolve, reject) => {\n      let value: any;\n      this.subscribe((x: T) => value = x, (err: any) => reject(err), () => resolve(value));\n    }) as Promise<T>;\n  }\n}\n\n/**\n * Decides between a passed promise constructor from consuming code,\n * A default configured promise constructor, and the native promise\n * constructor and returns it. If nothing can be found, it will throw\n * an error.\n * @param promiseCtor The optional promise constructor to passed by consuming code\n */\nfunction getPromiseCtor(promiseCtor: PromiseConstructorLike | undefined) {\n  if (!promiseCtor) {\n    promiseCtor = config.Promise || Promise;\n  }\n\n  if (!promiseCtor) {\n    throw new Error('no Promise impl found');\n  }\n\n  return promiseCtor;\n}\n","import { Observer } from './types';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\nexport const empty: Observer<any> = {\n  closed: true,\n  next(value: any): void { /* noop */},\n  error(err: any): void {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n      throw err;\n    } else {\n      hostReportError(err);\n    }\n  },\n  complete(): void { /*noop*/ }\n};\n","import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Observer, PartialObserver, TeardownLogic } from './types';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber<T> extends Subscription implements Observer<T> {\n\n  [rxSubscriberSymbol]() { return this; }\n\n  /**\n   * A static factory for a Subscriber, given a (potentially partial) definition\n   * of an Observer.\n   * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n   * Observer represented by the given arguments.\n   * @nocollapse\n   */\n  static create<T>(next?: (x?: T) => void,\n                   error?: (e?: any) => void,\n                   complete?: () => void): Subscriber<T> {\n    const subscriber = new Subscriber(next, error, complete);\n    subscriber.syncErrorThrowable = false;\n    return subscriber;\n  }\n\n  /** @internal */ syncErrorValue: any = null;\n  /** @internal */ syncErrorThrown: boolean = false;\n  /** @internal */ syncErrorThrowable: boolean = false;\n\n  protected isStopped: boolean = false;\n  protected destination: PartialObserver<any> | Subscriber<any>; // this `any` is the escape hatch to erase extra type param (e.g. R)\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  constructor(destinationOrNext?: PartialObserver<any> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    switch (arguments.length) {\n      case 0:\n        this.destination = emptyObserver;\n        break;\n      case 1:\n        if (!destinationOrNext) {\n          this.destination = emptyObserver;\n          break;\n        }\n        if (typeof destinationOrNext === 'object') {\n          if (destinationOrNext instanceof Subscriber) {\n            this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n            this.destination = destinationOrNext;\n            destinationOrNext.add(this);\n          } else {\n            this.syncErrorThrowable = true;\n            this.destination = new SafeSubscriber<T>(this, <PartialObserver<any>> destinationOrNext);\n          }\n          break;\n        }\n      default:\n        this.syncErrorThrowable = true;\n        this.destination = new SafeSubscriber<T>(this, <((value: T) => void)> destinationOrNext, error, complete);\n        break;\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `next` from\n   * the Observable, with a value. The Observable may call this method 0 or more\n   * times.\n   * @param {T} [value] The `next` value.\n   * @return {void}\n   */\n  next(value?: T): void {\n    if (!this.isStopped) {\n      this._next(value);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive notifications of type `error` from\n   * the Observable, with an attached `Error`. Notifies the Observer that\n   * the Observable has experienced an error condition.\n   * @param {any} [err] The `error` exception.\n   * @return {void}\n   */\n  error(err?: any): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._error(err);\n    }\n  }\n\n  /**\n   * The {@link Observer} callback to receive a valueless notification of type\n   * `complete` from the Observable. Notifies the Observer that the Observable\n   * has finished sending push-based notifications.\n   * @return {void}\n   */\n  complete(): void {\n    if (!this.isStopped) {\n      this.isStopped = true;\n      this._complete();\n    }\n  }\n\n  unsubscribe(): void {\n    if (this.closed) {\n      return;\n    }\n    this.isStopped = true;\n    super.unsubscribe();\n  }\n\n  protected _next(value: T): void {\n    this.destination.next(value);\n  }\n\n  protected _error(err: any): void {\n    this.destination.error(err);\n    this.unsubscribe();\n  }\n\n  protected _complete(): void {\n    this.destination.complete();\n    this.unsubscribe();\n  }\n\n  /** @deprecated This is an internal implementation detail, do not use. */\n  _unsubscribeAndRecycle(): Subscriber<T> {\n    const {  _parentOrParents } = this;\n    this._parentOrParents = null;\n    this.unsubscribe();\n    this.closed = false;\n    this.isStopped = false;\n    this._parentOrParents = _parentOrParents;\n    return this;\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport class SafeSubscriber<T> extends Subscriber<T> {\n\n  private _context: any;\n\n  constructor(private _parentSubscriber: Subscriber<T>,\n              observerOrNext?: PartialObserver<T> | ((value: T) => void),\n              error?: (e?: any) => void,\n              complete?: () => void) {\n    super();\n\n    let next: ((value: T) => void);\n    let context: any = this;\n\n    if (isFunction(observerOrNext)) {\n      next = (<((value: T) => void)> observerOrNext);\n    } else if (observerOrNext) {\n      next = (<PartialObserver<T>> observerOrNext).next;\n      error = (<PartialObserver<T>> observerOrNext).error;\n      complete = (<PartialObserver<T>> observerOrNext).complete;\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n        if (isFunction(context.unsubscribe)) {\n          this.add(<() => void> context.unsubscribe.bind(context));\n        }\n        context.unsubscribe = this.unsubscribe.bind(this);\n      }\n    }\n\n    this._context = context;\n    this._next = next;\n    this._error = error;\n    this._complete = complete;\n  }\n\n  next(value?: T): void {\n    if (!this.isStopped && this._next) {\n      const { _parentSubscriber } = this;\n      if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n        this.__tryOrUnsub(this._next, value);\n      } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  error(err?: any): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      const { useDeprecatedSynchronousErrorHandling } = config;\n      if (this._error) {\n        if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._error, err);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, this._error, err);\n          this.unsubscribe();\n        }\n      } else if (!_parentSubscriber.syncErrorThrowable) {\n        this.unsubscribe();\n        if (useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        }\n        hostReportError(err);\n      } else {\n        if (useDeprecatedSynchronousErrorHandling) {\n          _parentSubscriber.syncErrorValue = err;\n          _parentSubscriber.syncErrorThrown = true;\n        } else {\n          hostReportError(err);\n        }\n        this.unsubscribe();\n      }\n    }\n  }\n\n  complete(): void {\n    if (!this.isStopped) {\n      const { _parentSubscriber } = this;\n      if (this._complete) {\n        const wrappedComplete = () => this._complete.call(this._context);\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(wrappedComplete);\n          this.unsubscribe();\n        } else {\n          this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n          this.unsubscribe();\n        }\n      } else {\n        this.unsubscribe();\n      }\n    }\n  }\n\n  private __tryOrUnsub(fn: Function, value?: any): void {\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      this.unsubscribe();\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        throw err;\n      } else {\n        hostReportError(err);\n      }\n    }\n  }\n\n  private __tryOrSetError(parent: Subscriber<T>, fn: Function, value?: any): boolean {\n    if (!config.useDeprecatedSynchronousErrorHandling) {\n      throw new Error('bad call');\n    }\n    try {\n      fn.call(this._context, value);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        parent.syncErrorValue = err;\n        parent.syncErrorThrown = true;\n        return true;\n      } else {\n        hostReportError(err);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /** @internal This is an internal implementation detail, do not use. */\n  _unsubscribe(): void {\n    const { _parentSubscriber } = this;\n    this._context = null;\n    this._parentSubscriber = null;\n    _parentSubscriber.unsubscribe();\n  }\n}\n","import { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { SubscriptionLike, TeardownLogic } from './types';\n\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport class Subscription implements SubscriptionLike {\n  /** @nocollapse */\n  public static EMPTY: Subscription = (function(empty: any) {\n    empty.closed = true;\n    return empty;\n  }(new Subscription()));\n\n  /**\n   * A flag to indicate whether this Subscription has already been unsubscribed.\n   * @type {boolean}\n   */\n  public closed: boolean = false;\n\n  /** @internal */\n  protected _parentOrParents: Subscription | Subscription[] = null;\n  /** @internal */\n  private _subscriptions: SubscriptionLike[] = null;\n\n  /**\n   * @param {function(): void} [unsubscribe] A function describing how to\n   * perform the disposal of resources when the `unsubscribe` method is called.\n   */\n  constructor(unsubscribe?: () => void) {\n    if (unsubscribe) {\n      (this as any)._ctorUnsubscribe = true;\n      (this as any)._unsubscribe = unsubscribe;\n    }\n  }\n\n  /**\n   * Disposes the resources held by the subscription. May, for instance, cancel\n   * an ongoing Observable execution or cancel any other type of work that\n   * started when the Subscription was created.\n   * @return {void}\n   */\n  unsubscribe(): void {\n    let errors: any[];\n\n    if (this.closed) {\n      return;\n    }\n\n    let { _parentOrParents, _ctorUnsubscribe, _unsubscribe, _subscriptions } = (this as any);\n\n    this.closed = true;\n    this._parentOrParents = null;\n    // null out _subscriptions first so any child subscriptions that attempt\n    // to remove themselves from this subscription will noop\n    this._subscriptions = null;\n\n    if (_parentOrParents instanceof Subscription) {\n      _parentOrParents.remove(this);\n    } else if (_parentOrParents !== null) {\n      for (let index = 0; index < _parentOrParents.length; ++index) {\n        const parent = _parentOrParents[index];\n        parent.remove(this);\n      }\n    }\n\n    if (isFunction(_unsubscribe)) {\n      // It's only possible to null _unsubscribe - to release the reference to\n      // any teardown function passed in the constructor - if the property was\n      // actually assigned in the constructor, as there are some classes that\n      // are derived from Subscriber (which derives from Subscription) that\n      // implement an _unsubscribe method as a mechanism for obtaining\n      // unsubscription notifications and some of those subscribers are\n      // recycled. Also, in some of those subscribers, _unsubscribe switches\n      // from a prototype method to an instance property - see notifyNext in\n      // RetryWhenSubscriber.\n      if (_ctorUnsubscribe) {\n        (this as any)._unsubscribe = undefined;\n      }\n      try {\n        _unsubscribe.call(this);\n      } catch (e) {\n        errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n      }\n    }\n\n    if (isArray(_subscriptions)) {\n      let index = -1;\n      let len = _subscriptions.length;\n\n      while (++index < len) {\n        const sub = _subscriptions[index];\n        if (isObject(sub)) {\n          try {\n            sub.unsubscribe();\n          } catch (e) {\n            errors = errors || [];\n            if (e instanceof UnsubscriptionError) {\n              errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n            } else {\n              errors.push(e);\n            }\n          }\n        }\n      }\n    }\n\n    if (errors) {\n      throw new UnsubscriptionError(errors);\n    }\n  }\n\n  /**\n   * Adds a tear down to be called during the unsubscribe() of this\n   * Subscription. Can also be used to add a child subscription.\n   *\n   * If the tear down being added is a subscription that is already\n   * unsubscribed, is the same reference `add` is being called on, or is\n   * `Subscription.EMPTY`, it will not be added.\n   *\n   * If this subscription is already in an `closed` state, the passed\n   * tear down logic will be executed immediately.\n   *\n   * When a parent subscription is unsubscribed, any child subscriptions that were added to it are also unsubscribed.\n   *\n   * @param {TeardownLogic} teardown The additional logic to execute on\n   * teardown.\n   * @return {Subscription} Returns the Subscription used or created to be\n   * added to the inner subscriptions list. This Subscription can be used with\n   * `remove()` to remove the passed teardown logic from the inner subscriptions\n   * list.\n   */\n  add(teardown: TeardownLogic): Subscription {\n    let subscription = (<Subscription>teardown);\n\n    if (!teardown) {\n      return Subscription.EMPTY;\n    }\n\n    switch (typeof teardown) {\n      case 'function':\n        subscription = new Subscription(<(() => void)>teardown);\n      case 'object':\n        if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n          // This also covers the case where `subscription` is `Subscription.EMPTY`, which is always in `closed` state.\n          return subscription;\n        } else if (this.closed) {\n          subscription.unsubscribe();\n          return subscription;\n        } else if (!(subscription instanceof Subscription)) {\n          const tmp = subscription;\n          subscription = new Subscription();\n          subscription._subscriptions = [tmp];\n        }\n        break;\n      default: {\n        throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n      }\n    }\n\n    // Add `this` as parent of `subscription` if that's not already the case.\n    let { _parentOrParents } = subscription;\n    if (_parentOrParents === null) {\n      // If we don't have a parent, then set `subscription._parents` to\n      // the `this`, which is the common case that we optimize for.\n      subscription._parentOrParents = this;\n    } else if (_parentOrParents instanceof Subscription) {\n      if (_parentOrParents === this) {\n        // The `subscription` already has `this` as a parent.\n        return subscription;\n      }\n      // If there's already one parent, but not multiple, allocate an\n      // Array to store the rest of the parent Subscriptions.\n      subscription._parentOrParents = [_parentOrParents, this];\n    } else if (_parentOrParents.indexOf(this) === -1) {\n      // Only add `this` to the _parentOrParents list if it's not already there.\n      _parentOrParents.push(this);\n    } else {\n      // The `subscription` already has `this` as a parent.\n      return subscription;\n    }\n\n    // Optimize for the common case when adding the first subscription.\n    const subscriptions = this._subscriptions;\n    if (subscriptions === null) {\n      this._subscriptions = [subscription];\n    } else {\n      subscriptions.push(subscription);\n    }\n\n    return subscription;\n  }\n\n  /**\n   * Removes a Subscription from the internal list of subscriptions that will\n   * unsubscribe during the unsubscribe process of this Subscription.\n   * @param {Subscription} subscription The subscription to remove.\n   * @return {void}\n   */\n  remove(subscription: Subscription): void {\n    const subscriptions = this._subscriptions;\n    if (subscriptions) {\n      const subscriptionIndex = subscriptions.indexOf(subscription);\n      if (subscriptionIndex !== -1) {\n        subscriptions.splice(subscriptionIndex, 1);\n      }\n    }\n  }\n}\n\nfunction flattenUnsubscriptionErrors(errors: any[]) {\n return errors.reduce((errs, err) => errs.concat((err instanceof UnsubscriptionError) ? err.errors : err), []);\n}\n","let _enable_super_gross_mode_that_will_cause_bad_things = false;\n\n/**\n * The global configuration object for RxJS, used to configure things\n * like what Promise contructor should used to create Promises\n */\nexport const config = {\n  /**\n   * The promise constructor used by default for methods such as\n   * {@link toPromise} and {@link forEach}\n   */\n  Promise: undefined as PromiseConstructorLike,\n\n  /**\n   * If true, turns on synchronous error rethrowing, which is a deprecated behavior\n   * in v6 and higher. This behavior enables bad patterns like wrapping a subscribe\n   * call in a try/catch block. It also enables producer interference, a nasty bug\n   * where a multicast can be broken for all observers by a downstream consumer with\n   * an unhandled error. DO NOT USE THIS FLAG UNLESS IT'S NEEDED TO BY TIME\n   * FOR MIGRATION REASONS.\n   */\n  set useDeprecatedSynchronousErrorHandling(value: boolean) {\n    if (value) {\n      const error = new Error();\n      console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n    } else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n      console.log('RxJS: Back to a better error behavior. Thank you. <3');\n    }\n    _enable_super_gross_mode_that_will_cause_bad_things = value;\n  },\n\n  get useDeprecatedSynchronousErrorHandling() {\n    return _enable_super_gross_mode_that_will_cause_bad_things;\n  },\n};\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction, MonoTypeOperatorFunction, TeardownLogic } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function filter<T, S extends T>(predicate: (value: T, index: number) => value is S,\n                                       thisArg?: any): OperatorFunction<T, S>;\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T>;\n/* tslint:enable:max-line-length */\n\n/**\n * Filter items emitted by the source Observable by only emitting those that\n * satisfy a specified predicate.\n *\n * <span class=\"informal\">Like\n * [Array.prototype.filter()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter),\n * it only emits a value from the source if it passes a criterion function.</span>\n *\n * ![](filter.png)\n *\n * Similar to the well-known `Array.prototype.filter` method, this operator\n * takes values from the source Observable, passes them through a `predicate`\n * function and only emits those values that yielded `true`.\n *\n * ## Example\n * Emit only click events whose target was a DIV element\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { filter } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const clicksOnDivs = clicks.pipe(filter(ev => ev.target.tagName === 'DIV'));\n * clicksOnDivs.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link distinct}\n * @see {@link distinctUntilChanged}\n * @see {@link distinctUntilKeyChanged}\n * @see {@link ignoreElements}\n * @see {@link partition}\n * @see {@link skip}\n *\n * @param {function(value: T, index: number): boolean} predicate A function that\n * evaluates each value emitted by the source Observable. If it returns `true`,\n * the value is emitted, if `false` the value is not passed to the output\n * Observable. The `index` parameter is the number `i` for the i-th source\n * emission that has happened since the subscription, starting from the number\n * `0`.\n * @param {any} [thisArg] An optional argument to determine the value of `this`\n * in the `predicate` function.\n * @return {Observable} An Observable of values from the source that were\n * allowed by the `predicate` function.\n * @method filter\n * @owner Observable\n */\nexport function filter<T>(predicate: (value: T, index: number) => boolean,\n                          thisArg?: any): MonoTypeOperatorFunction<T> {\n  return function filterOperatorFunction(source: Observable<T>): Observable<T> {\n    return source.lift(new FilterOperator(predicate, thisArg));\n  };\n}\n\nclass FilterOperator<T> implements Operator<T, T> {\n  constructor(private predicate: (value: T, index: number) => boolean,\n              private thisArg?: any) {\n  }\n\n  call(subscriber: Subscriber<T>, source: any): TeardownLogic {\n    return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass FilterSubscriber<T> extends Subscriber<T> {\n\n  count: number = 0;\n\n  constructor(destination: Subscriber<T>,\n              private predicate: (value: T, index: number) => boolean,\n              private thisArg: any) {\n    super(destination);\n  }\n\n  // the try catch block below is left specifically for\n  // optimization and perf reasons. a tryCatcher is not necessary here.\n  protected _next(value: T) {\n    let result: any;\n    try {\n      result = this.predicate.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    if (result) {\n      this.destination.next(value);\n    }\n  }\n}\n","import { Operator } from '../Operator';\nimport { Subscriber } from '../Subscriber';\nimport { Observable } from '../Observable';\nimport { OperatorFunction } from '../types';\n\n/**\n * Applies a given `project` function to each value emitted by the source\n * Observable, and emits the resulting values as an Observable.\n *\n * <span class=\"informal\">Like [Array.prototype.map()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map),\n * it passes each source value through a transformation function to get\n * corresponding output values.</span>\n *\n * ![](map.png)\n *\n * Similar to the well known `Array.prototype.map` function, this operator\n * applies a projection to each value and emits that projection in the output\n * Observable.\n *\n * ## Example\n * Map every click to the clientX position of that click\n * ```ts\n * import { fromEvent } from 'rxjs';\n * import { map } from 'rxjs/operators';\n *\n * const clicks = fromEvent(document, 'click');\n * const positions = clicks.pipe(map(ev => ev.clientX));\n * positions.subscribe(x => console.log(x));\n * ```\n *\n * @see {@link mapTo}\n * @see {@link pluck}\n *\n * @param {function(value: T, index: number): R} project The function to apply\n * to each `value` emitted by the source Observable. The `index` parameter is\n * the number `i` for the i-th emission that has happened since the\n * subscription, starting from the number `0`.\n * @param {any} [thisArg] An optional argument to define what `this` is in the\n * `project` function.\n * @return {Observable<R>} An Observable that emits the values from the source\n * Observable transformed by the given `project` function.\n * @method map\n * @owner Observable\n */\nexport function map<T, R>(project: (value: T, index: number) => R, thisArg?: any): OperatorFunction<T, R> {\n  return function mapOperation(source: Observable<T>): Observable<R> {\n    if (typeof project !== 'function') {\n      throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n    }\n    return source.lift(new MapOperator(project, thisArg));\n  };\n}\n\nexport class MapOperator<T, R> implements Operator<T, R> {\n  constructor(private project: (value: T, index: number) => R, private thisArg: any) {\n  }\n\n  call(subscriber: Subscriber<R>, source: any): any {\n    return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n  }\n}\n\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass MapSubscriber<T, R> extends Subscriber<T> {\n  count: number = 0;\n  private thisArg: any;\n\n  constructor(destination: Subscriber<R>,\n              private project: (value: T, index: number) => R,\n              thisArg: any) {\n    super(destination);\n    this.thisArg = thisArg || this;\n  }\n\n  // NOTE: This looks unoptimized, but it's actually purposefully NOT\n  // using try/catch optimizations.\n  protected _next(value: T) {\n    let result: R;\n    try {\n      result = this.project.call(this.thisArg, value, this.count++);\n    } catch (err) {\n      this.destination.error(err);\n      return;\n    }\n    this.destination.next(result);\n  }\n}\n","/** Symbol.observable or a string \"@@observable\". Used for interop */\nexport const observable = (() => typeof Symbol === 'function' && Symbol.observable || '@@observable')();\n","/** @deprecated do not use, this is no longer checked by RxJS internals */\nexport const rxSubscriber = (() =>\n  typeof Symbol === 'function'\n    ? Symbol('rxSubscriber')\n    : '@@rxSubscriber_' + Math.random())();\n\n/**\n * @deprecated use rxSubscriber instead\n */\nexport const $$rxSubscriber = rxSubscriber;\n","export interface UnsubscriptionError extends Error {\n  readonly errors: any[];\n}\n\nexport interface UnsubscriptionErrorCtor {\n  new(errors: any[]): UnsubscriptionError;\n}\n\nconst UnsubscriptionErrorImpl = (() => {\n  function UnsubscriptionErrorImpl(this: any, errors: any[]) {\n    Error.call(this);\n    this.message = errors ?\n      `${errors.length} errors occurred during unsubscription:\n${errors.map((err, i) => `${i + 1}) ${err.toString()}`).join('\\n  ')}` : '';\n    this.name = 'UnsubscriptionError';\n    this.errors = errors;\n    return this;\n  }\n\n  UnsubscriptionErrorImpl.prototype = Object.create(Error.prototype);\n\n  return UnsubscriptionErrorImpl;\n})();\n\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport const UnsubscriptionError: UnsubscriptionErrorCtor = UnsubscriptionErrorImpl as any;","import { Subscriber } from '../Subscriber';\nimport { Subject } from '../Subject';\n\n/**\n * Determines whether the ErrorObserver is closed or stopped or has a\n * destination that is closed or stopped - in which case errors will\n * need to be reported via a different mechanism.\n * @param observer the observer\n */\nexport function canReportError(observer: Subscriber<any> | Subject<any>): boolean {\n  while (observer) {\n    const { closed, destination, isStopped } = observer as any;\n    if (closed || isStopped) {\n      return false;\n    } else if (destination && destination instanceof Subscriber) {\n      observer = destination;\n    } else {\n      observer = null;\n    }\n  }\n  return true;\n}\n","/**\n * Throws an error on another job so that it's picked up by the runtime's\n * uncaught error handling mechanism.\n * @param err the error to throw\n */\nexport function hostReportError(err: any) {\n  setTimeout(() => { throw err; }, 0);\n}","export function identity<T>(x: T): T {\n  return x;\n}\n","export const isArray = (() => Array.isArray || (<T>(x: any): x is T[] => x && typeof x.length === 'number'))();\n","export function isFunction(x: any): x is Function {\n  return typeof x === 'function';\n}\n","export function isObject(x: any): x is Object {\n  return x !== null && typeof x === 'object';\n}\n","import { noop } from './noop';\nimport { identity } from './identity';\nimport { UnaryFunction } from '../types';\n\n/* tslint:disable:max-line-length */\nexport function pipe<T>(): UnaryFunction<T, T>;\nexport function pipe<T, A>(fn1: UnaryFunction<T, A>): UnaryFunction<T, A>;\nexport function pipe<T, A, B>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>): UnaryFunction<T, B>;\nexport function pipe<T, A, B, C>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>): UnaryFunction<T, C>;\nexport function pipe<T, A, B, C, D>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>): UnaryFunction<T, D>;\nexport function pipe<T, A, B, C, D, E>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>): UnaryFunction<T, E>;\nexport function pipe<T, A, B, C, D, E, F>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>): UnaryFunction<T, F>;\nexport function pipe<T, A, B, C, D, E, F, G>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>): UnaryFunction<T, G>;\nexport function pipe<T, A, B, C, D, E, F, G, H>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>): UnaryFunction<T, H>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>): UnaryFunction<T, I>;\nexport function pipe<T, A, B, C, D, E, F, G, H, I>(fn1: UnaryFunction<T, A>, fn2: UnaryFunction<A, B>, fn3: UnaryFunction<B, C>, fn4: UnaryFunction<C, D>, fn5: UnaryFunction<D, E>, fn6: UnaryFunction<E, F>, fn7: UnaryFunction<F, G>, fn8: UnaryFunction<G, H>, fn9: UnaryFunction<H, I>, ...fns: UnaryFunction<any, any>[]): UnaryFunction<T, {}>;\n/* tslint:enable:max-line-length */\n\nexport function pipe(...fns: Array<UnaryFunction<any, any>>): UnaryFunction<any, any> {\n  return pipeFromArray(fns);\n}\n\n/** @internal */\nexport function pipeFromArray<T, R>(fns: Array<UnaryFunction<T, R>>): UnaryFunction<T, R> {\n  if (fns.length === 0) {\n    return identity as UnaryFunction<any, any>;\n  }\n\n  if (fns.length === 1) {\n    return fns[0];\n  }\n\n  return function piped(input: T): R {\n    return fns.reduce((prev: any, fn: UnaryFunction<T, R>) => fn(prev), input as any);\n  };\n}\n","import { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nimport { PartialObserver } from '../types';\n\nexport function toSubscriber<T>(\n  nextOrObserver?: PartialObserver<T> | ((value: T) => void),\n  error?: (error: any) => void,\n  complete?: () => void): Subscriber<T> {\n\n  if (nextOrObserver) {\n    if (nextOrObserver instanceof Subscriber) {\n      return (<Subscriber<T>> nextOrObserver);\n    }\n\n    if (nextOrObserver[rxSubscriberSymbol]) {\n      return nextOrObserver[rxSubscriberSymbol]();\n    }\n  }\n\n  if (!nextOrObserver && !error && !complete) {\n    return new Subscriber(emptyObserver);\n  }\n\n  return new Subscriber(nextOrObserver, error, complete);\n}\n","'use strict';\n\nvar url = require('url');\n\nmodule.exports = function(uri1, uri2, ieMode) {\n    if (uri1 === uri2) {\n        return true;\n    }\n\n    var url1 = url.parse(uri1, false, true);\n    var url2 = url.parse(uri2, false, true);\n\n    var url1Port = url1.port|0 || (url1.protocol === 'https' ? 443 : 80);\n    var url2Port = url2.port|0 || (url2.protocol === 'https' ? 443 : 80);\n\n    var match = {\n        proto: url1.protocol === url2.protocol,\n        hostname: url1.hostname === url2.hostname,\n        port: url1Port === url2Port\n    };\n\n    return ((match.proto && match.hostname) && (match.port || ieMode));\n};","/**\n * This file is only used for the browser version of `same-origin`.\n * Used to bring down the size of the browser bundle.\n */\n'use strict';\n\nvar regex = /^(?:(?:(?:([^:\\/#\\?]+:)?(?:(?:\\/\\/)((?:((?:[^:@\\/#\\?]+)(?:\\:(?:[^:@\\/#\\?]+))?)@)?(([^:\\/#\\?\\]\\[]+|\\[[^\\/\\]@#?]+\\])(?:\\:([0-9]+))?))?)?)?((?:\\/?(?:[^\\/\\?#]+\\/+)*)(?:[^\\?#]*)))?(\\?[^#]+)?)(#.*)?/;\n\nmodule.exports = {\n    regex: regex,\n    parse: function(url) {\n        var match = regex.exec(url);\n        if (!match) {\n            return {};\n        }\n\n        return {\n            protocol: (match[1] || '').toLowerCase() || undefined,\n            hostname: (match[5] || '').toLowerCase() || undefined,\n            port: match[6] || undefined\n        };\n    }\n};","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n"],"names":["_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","assign","require","_require","map","filter","queryString","validators","AssetsClient","client","this","optionsFromFile","opts","file","window","File","filename","preserveFilename","undefined","contentType","type","upload","assetType","body","arguments","validateAssetType","meta","extract","dataset","hasDataset","clientConfig","assetEndpoint","options","tag","label","title","description","creditLine","source","query","sourceId","id","sourceName","sourceUrl","url","observable","_requestObservable","method","timeout","uri","concat","headers","isPromiseAPI","pipe","event","document","toPromise","delete","console","warn","docId","_id","getImageUrl","ref","_ref","Error","_id$split2","split","assetId","size","format","_this$client$clientCo","projectId","qs","module","exports","AuthClient","getLoginProviders","request","logout","generateHelpUrl","validate","warnings","defaultConfig","apiHost","apiVersion","useProjectHostname","LOCALHOSTS","initConfig","config","prevConfig","specifiedConfig","printNoApiVersionSpecifiedWarning","newConfig","projectBased","Promise","helpUrl","isBrowser","location","hostname","isLocalhost","host","indexOf","isLocal","token","ignoreBrowserTokenWarning","printBrowserTokenWarning","useCdn","printCdnWarning","requestTagPrefix","requestTag","replace","isDefaultApi","Boolean","withCredentials","validateApiVersion","hostParts","protocol","cdnHost","cdnUrl","apiDate","Date","getTime","_defineProperty","obj","key","defineProperty","enumerable","configurable","writable","getSelection","encodeQueryString","Transaction","Patch","listen","excludeFalsey","param","defValue","getMutationQuery","dryRun","returnIds","returnDocuments","visibility","autoGenerateArrayKeys","skipCrossDatasetReferenceValidation","isResponse","getBody","indexBy","docs","attr","reduce","indexed","doc","create","getDataUrl","operation","path","catalog","baseUri","fetch","params","mapResponse","filterResponse","res","result","_dataRequest","getDocument","json","documents","getDocuments","ids","join","_create","createIfNotExists","requireDocumentId","createOrReplace","patch","selector","operations","selection","dataRequest","mutations","mutate","mut","serialize","muts","transactionId","transaction","endpoint","isMutation","isQuery","strQuery","useGet","stringQuery","returnFirst","reqOptions","canUseCdn","results","op","mutation","_excluded","_objectWithoutProperties","excluded","target","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","enc","encodeURIComponent","_ref$params","_ref$options","q","base","qString","JSON","stringify","option","ownKeys","object","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","apply","_objectSpread","forEach","getOwnPropertyDescriptors","defineProperties","Observable","polyfilledEventSource","pick","defaults","EventSource","possibleOptions","defaultOptions","includeResult","parseEvent","data","parse","cooerceError","evt","error","message","extractErrorMessage","_this$clientConfig","listenOpts","observer","listenFor","events","shouldEmitReconnect","esOptions","Authorization","reconnectTimer","es","getEventSource","stopped","onError","readyState","CLOSED","unsubscribe","clearTimeout","setTimeout","open","onChannelError","onMessage","onDisconnect","complete","removeEventListener","close","evs","addEventListener","validateObject","validateInsert","clone","set","props","_assign","diffMatchPatch","unset","attrs","setIfMissing","_set","$","inc","dec","insert","at","items","_this$_assign","append","prepend","splice","start","deleteCount","startIndex","delCount","Math","max","delRange","rangeSelector","ifRevisionId","rev","ifRevisionID","toJSON","commit","reset","merge","defaultMutateOptions","trxId","_add","documentId","validateDocumentId","patchOps","isBuilder","DatasetsClient","bind","_modify","edit","list","slug","makeError","ClientError","extractErrorProps","super","ServerError","response","statusCode","responseBody","stringifyBody","details","statusMessage","httpErrorMessage","toLowerCase","hasOwnProperty","getIt","jsonRequest","jsonResponse","progress","_require2","httpError","onResponse","printWarnings","msg","implementation","httpRequest","requester","maxRedirects","defaultRequester","projectHeader","overrides","useGlobalApi","proxy","ProjectsClient","getById","dataMethods","UsersClient","getRequestOptions","SanityClient","assets","datasets","projects","users","auth","observableConfig","allowReconfigure","withConfig","getUrl","_this","subscriber","subscribe","prop","sel","selectionOpts","fn","returnValue","didCall","_typeof","VALID_ASSET_TYPES","VALID_INSERT_LOCATIONS","val","signature","valid","loc","once","createWarningPrinter","_console","_len","args","_key","EventSourcePolyfill","const","example","parseAssetId","dimensionString","width","imgWidthStr","height","imgHeightStr","isFinite","isRef","src","isAsset","isAssetStub","asset","parseSource","image","isUrl","urlToId","img","crop","hotspot","applyDefaults","left","top","bottom","right","x","y","SPEC_NAME_TO_URL_NAME_MAPPINGS","urlForImage","spec","cropLeft","round","cropTop","hotSpotVerticalRadius","hotSpotHorizontalRadius","hotSpotCenterX","hotSpotCenterY","rect","focalPoint","ignoreImageParams","fit","specToImageUrl","baseUrl","bg","flip","flipHorizontal","flipVertical","mapping","specName","cropRect","imgWidth","imgHeight","desiredAspectRatio","hotspotXCenter","hotspotYCenter","validFits","validCrops","validAutoModes","isSanityClientLike","rewriteSpecName","specs","entry","urlBuilder","apiUrl","ImageUrlBuilder","parent","withOptions","newOptions","dpr","maxWidth","minWidth","maxHeight","minHeight","blur","sharpen","invert","orientation","quality","forceDownload","download","saturation","auto","pad","global","XMLHttpRequest","XDomainRequest","ActiveXObject","NativeEventSource","Response","TextDecoder","TextEncoder","AbortController","C","F","now","originalFetch2","signal","credentials","cache","then","reader","getReader","_reader","_aborted","cancel","status","statusText","abort","TextDecoderPolyfill","bitsNeeded","codePoint","decode","octets","shift","octetsCount","REPLACER","string","octet","String","fromCharCode","encode","stream","debug","supportsStreamOption","k","XHRWrapper","xhr","responseText","onprogress","onload","onerror","onreadystatechange","_contentType","_xhr","_sendTimeout","_abort","c","charCodeAt","HeadersPolyfill","all","array","parts","_map","XHRTransport","HeadersWrapper","_headers","FetchTransport","EventTarget","_listeners","throwError","e","Event","MessageEvent","lastEventId","ConnectionEvent","ErrorEvent","that","state","silent","onabort","onStart","getResponseHeader","onProgress","onFinish","preventDefault","onTimeout","onReadyStateChange","setRequestHeader","getAllResponseHeaders","send","error1","get","HEADERS_RECEIVED","onStartCallback","onProgressCallback","onFinishCallback","offset","chunk","controller","textDecoder","resolve","reject","readNextChunk","read","dispatchEvent","typeListeners","listener","handleEvent","listeners","found","filtered","WAITING","AFTER_CR","contentTypeRegExp","parseDuration","def","parseInt","clampDuration","min","fire","f","onopen","onmessage","_close","lastEventIdQueryParameterName","initialRetry","heartbeatTimeout","retry","wasActivity","textLength","TransportOption","Transport","isFetchSupported","transport","abortController","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","textChunk","position","field","requestURL","p","paramName","requestHeaders","nextHeartbeat","CONNECTING","OPEN","R","factory","v","define","globalThis","self","pubsub","middlewareReducer","processOptions","validateOptions","httpRequester","channelNames","middlehooks","createRequester","initMiddleware","loadedMiddleware","middleware","ware","channels","applyMiddleware","context","ongoingRequest","ctx","reqErr","publish","use","newMiddleware","onReturn","objectAssign","urlParse","isReactNative","navigator","product","has","stringifyQueryString","pairs","item","normalizeTimeout","time","connect","socket","delay","Number","isNaN","removeUndefined","toUpperCase","validUrl","isPlainObject","serializeTypes","isBuffer","tryParse","shouldDecode","force","Accept","onRequest","adapter","handleProgress","stage","percent","lengthComputable","loaded","total","sameOrigin","parseHeaders","FetchXhr","win","XmlHttpRequest","hasXhr2","XDR","CrossDomainRequest","callback","timers","cors","href","injectedResponse","cbTimer","isXdr","delays","aborted","timedOut","ontimeout","stopTimers","timeoutRequest","resetTimers","reduceResponse","onLoad","rawBody","responseType","code","isNetworkError","_method","_url","_resHeaders","_controller","ctrl","textBody","text","arrayBuffer","resBody","catch","hook","defaultValue","bailEarly","handler","isObject","isObjectObject","ctor","prot","construct","Reflect","captureStackTrace","BaseError","cname","container","stack","setFunctionName","_","super_","properties","subscribers","idx","trim","arg","headersArr","row","index","input","decodeURIComponent","prefix","undef","part","parser","exec","port","_isScalar","_subscribe","operator","observerOrNext","sink","toSubscriber_1","add","config_1","useDeprecatedSynchronousErrorHandling","syncErrorThrowable","_trySubscribe","syncErrorThrown","syncErrorValue","canReportError_1","promiseCtor","getPromiseCtor","subscription","observable_1","pipe_1","closed","hostReportError_1","destinationOrNext","_super","destination","Observer_1","Subscriber","SafeSubscriber","__extends","rxSubscriber_1","isStopped","_next","_error","_complete","_parentOrParents","Subscription_1","_parentSubscriber","isFunction_1","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","_subscriptions","_ctorUnsubscribe","_unsubscribe","empty","Subscription","errors","remove","UnsubscriptionError_1","flattenUnsubscriptionErrors","isArray_1","sub","isObject_1","teardown","EMPTY","tmp","subscriptions","subscriptionIndex","errs","_enable_super_gross_mode_that_will_cause_bad_things","log","predicate","thisArg","lift","FilterOperator","FilterSubscriber","count","Subscriber_1","project","MapOperator","MapSubscriber","random","UnsubscriptionErrorImpl","closed_1","pipeFromArray","fns","identity_1","prev","nextOrObserver","uri1","uri2","ieMode","url1","url2","url1Port","url2Port","match","proto","regex","required","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","str","rules","address","isSpecial","NaN","ignore","hash","lolcation","finaldestination","Url","unescape","pathname","scheme","extractProtocol","rest","forwardSlashes","otherSlashes","slashesCount","relative","extracted","instruction","instructions","lastIndexOf","charAt","last","unshift","up","username","password","origin","pop","char","ins"],"sourceRoot":""}